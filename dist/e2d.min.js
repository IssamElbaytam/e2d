!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.e2d=e()}}(function(){return function e(t,r,n){function s(a,o){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(i)return i(a,!0);var c=Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return s(r?r:e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var s=e[n];"."===s?e.splice(n,1):".."===s?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return s.exec(e).slice(1)};r.resolve=function(){for(var r="",s=!1,i=arguments.length-1;i>=-1&&!s;i--){var a=0>i?e.cwd():arguments[i];if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,s="/"===a.charAt(0))}return r=t(n(r.split("/"),function(e){return!!e}),!s).join("/"),(s?"/":"")+r||"."},r.normalize=function(e){var s=r.isAbsolute(e),i="/"===a(e,-1);return e=t(n(e.split("/"),function(e){return!!e}),!s).join("/"),e||s||(e="."),e&&i&&(e+="/"),(s?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var s=n(e.split("/")),i=n(t.split("/")),a=Math.min(s.length,i.length),o=a,l=0;a>l;l++)if(s[l]!==i[l]){o=l;break}for(var c=[],l=o;l<s.length;l++)c.push("..");return c=c.concat(i.slice(o)),c.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=i(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=i(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return i(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return 0>t&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:2}],2:[function(e,t){function r(){c=!1,a.length?l=a.concat(l):u=-1,l.length&&n()}function n(){if(!c){var e=setTimeout(r);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a[u].run();u=-1,t=l.length}a=null,c=!1,clearTimeout(e)}}function s(e,t){this.fun=e,this.array=t}function i(){}var a,o=t.exports={},l=[],c=!1,u=-1;o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new s(e,t)),1!==l.length||c||setTimeout(n,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=i,o.addListener=i,o.once=i,o.off=i,o.removeListener=i,o.removeAllListeners=i,o.emit=i,o.binding=function(){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(){throw Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],3:[function(e,t){"use strict";t.exports={Canvas:e("./src\\Canvas.js"),Gradient:e("./src\\Gradient.js"),Img:e("./src\\Img.js"),Instruction:e("./src\\Instruction.js"),Renderer:e("./src\\Renderer.js"),addColorStop:e("./src\\addColorStop.js"),arc:e("./src\\arc.js"),arcTo:e("./src\\arcTo.js"),beginPath:e("./src\\beginPath.js"),bezierCurveTo:e("./src\\bezierCurveTo.js"),clearRect:e("./src\\clearRect.js"),clip:e("./src\\clip.js"),clipPath:e("./src\\clipPath.js"),closePath:e("./src\\closePath.js"),createLinearGradient:e("./src\\createLinearGradient.js"),createRadialGradient:e("./src\\createRadialGradient.js"),drawCanvas:e("./src\\drawCanvas.js"),drawImage:e("./src\\drawImage.js"),ellipse:e("./src\\ellipse.js"),fill:e("./src\\fill.js"),fillArc:e("./src\\fillArc.js"),fillRect:e("./src\\fillRect.js"),fillStyle:e("./src\\fillStyle.js"),globalCompositeOperation:e("./src\\globalCompositeOperation.js"),isDataUrl:e("./src\\isDataUrl.js"),isWorker:e("./src\\isWorker.js"),lineStyle:e("./src\\lineStyle.js"),lineTo:e("./src\\lineTo.js"),moveTo:e("./src\\moveTo.js"),path:e("./src\\path.js"),quadraticCurveTo:e("./src\\quadraticCurveTo.js"),rotate:e("./src\\rotate.js"),scale:e("./src\\scale.js"),shadowStyle:e("./src\\shadowStyle.js"),stroke:e("./src\\stroke.js"),strokeArc:e("./src\\strokeArc.js"),strokeRect:e("./src\\strokeRect.js"),text:e("./src\\text.js"),textStyle:e("./src\\textStyle.js"),transform:e("./src\\transform.js"),translate:e("./src\\translate.js")}},{"./src\\Canvas.js":21,"./src\\Gradient.js":22,"./src\\Img.js":23,"./src\\Instruction.js":24,"./src\\Renderer.js":25,"./src\\addColorStop.js":26,"./src\\arc.js":27,"./src\\arcTo.js":28,"./src\\beginPath.js":29,"./src\\bezierCurveTo.js":30,"./src\\clearRect.js":31,"./src\\clip.js":32,"./src\\clipPath.js":33,"./src\\closePath.js":34,"./src\\createLinearGradient.js":35,"./src\\createRadialGradient.js":36,"./src\\drawCanvas.js":37,"./src\\drawImage.js":38,"./src\\ellipse.js":39,"./src\\fill.js":40,"./src\\fillArc.js":41,"./src\\fillRect.js":42,"./src\\fillStyle.js":43,"./src\\globalCompositeOperation.js":44,"./src\\isDataUrl.js":45,"./src\\isWorker.js":46,"./src\\lineStyle.js":47,"./src\\lineTo.js":48,"./src\\moveTo.js":49,"./src\\path.js":50,"./src\\quadraticCurveTo.js":51,"./src\\rotate.js":52,"./src\\scale.js":53,"./src\\shadowStyle.js":54,"./src\\stroke.js":55,"./src\\strokeArc.js":56,"./src\\strokeRect.js":57,"./src\\text.js":58,"./src\\textStyle.js":59,"./src\\transform.js":60,"./src\\translate.js":61}],4:[function(e,t){function r(e,t,r){var i=e?e.length:0;return r&&s(e,t,r)&&(t=!1),i?n(e,t):[]}var n=e("../internal/baseFlatten"),s=e("../internal/isIterateeCall");t.exports=r},{"../internal/baseFlatten":6,"../internal/isIterateeCall":12}],5:[function(e,t){function r(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}t.exports=r},{}],6:[function(e,t){function r(e,t,l,c){c||(c=[]);for(var u=-1,h=e.length;++u<h;){var d=e[u];o(d)&&a(d)&&(l||i(d)||s(d))?t?r(d,t,l,c):n(c,d):l||(c[c.length]=d)}return c}var n=e("./arrayPush"),s=e("../lang/isArguments"),i=e("../lang/isArray"),a=e("./isArrayLike"),o=e("./isObjectLike");t.exports=r},{"../lang/isArguments":15,"../lang/isArray":16,"./arrayPush":5,"./isArrayLike":10,"./isObjectLike":14}],7:[function(e,t){function r(e){return function(t){return null==t?void 0:t[e]}}t.exports=r},{}],8:[function(e,t){var r=e("./baseProperty"),n=r("length");t.exports=n},{"./baseProperty":7}],9:[function(e,t){function r(e,t){var r=null==e?void 0:e[t];return n(r)?r:void 0}var n=e("../lang/isNative");t.exports=r},{"../lang/isNative":18}],10:[function(e,t){function r(e){return null!=e&&s(n(e))}var n=e("./getLength"),s=e("./isLength");t.exports=r},{"./getLength":8,"./isLength":13}],11:[function(e,t){function r(e,t){return e="number"==typeof e||n.test(e)?+e:-1,t=null==t?s:t,e>-1&&e%1==0&&t>e}var n=/^\d+$/,s=9007199254740991;t.exports=r},{}],12:[function(e,t){function r(e,t,r){if(!i(r))return!1;var a=typeof t;if("number"==a?n(r)&&s(t,r.length):"string"==a&&t in r){var o=r[t];return e===e?e===o:o!==o}return!1}var n=e("./isArrayLike"),s=e("./isIndex"),i=e("../lang/isObject");t.exports=r},{"../lang/isObject":19,"./isArrayLike":10,"./isIndex":11}],13:[function(e,t){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&n>=e}var n=9007199254740991;t.exports=r},{}],14:[function(e,t){function r(e){return!!e&&"object"==typeof e}t.exports=r},{}],15:[function(e,t){function r(e){return s(e)&&n(e)&&a.call(e,"callee")&&!o.call(e,"callee")}var n=e("../internal/isArrayLike"),s=e("../internal/isObjectLike"),i=Object.prototype,a=i.hasOwnProperty,o=i.propertyIsEnumerable;t.exports=r},{"../internal/isArrayLike":10,"../internal/isObjectLike":14}],16:[function(e,t){var r=e("../internal/getNative"),n=e("../internal/isLength"),s=e("../internal/isObjectLike"),i="[object Array]",a=Object.prototype,o=a.toString,l=r(Array,"isArray"),c=l||function(e){return s(e)&&n(e.length)&&o.call(e)==i};t.exports=c},{"../internal/getNative":9,"../internal/isLength":13,"../internal/isObjectLike":14}],17:[function(e,t){function r(e){return n(e)&&a.call(e)==s}var n=e("./isObject"),s="[object Function]",i=Object.prototype,a=i.toString;t.exports=r},{"./isObject":19}],18:[function(e,t){function r(e){return null==e?!1:n(e)?c.test(o.call(e)):s(e)&&i.test(e)}var n=e("./isFunction"),s=e("../internal/isObjectLike"),i=/^\[object .+?Constructor\]$/,a=Object.prototype,o=Function.prototype.toString,l=a.hasOwnProperty,c=RegExp("^"+o.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},{"../internal/isObjectLike":14,"./isFunction":17}],19:[function(e,t){function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=r},{}],20:[function(e,t){"use strict";var r=(t.exports=function(e,t,s){switch(s&&s.toLowerCase()){case"strassen":return n(e,t);case"naive":default:return r(e,t)}},function(e,t){for(var r=e.length,n=[],s=0;r>s;s++)n.push([]);for(var i=0;r>i;i++)for(var a=0;r>a;a++){n[i][a]=0;for(var o=0;r>o;o++)n[i][a]=n[i][a]+e[i][o]*t[o][a]}return n}),n=function s(e,t){for(var r=e.length,n=[],i=0;r>i;i++)n.push([]);if(1==r)n[0][0]=e[0][0]*t[0][0];else{var a=r/2,o=[],l=[],c=[],u=[],h=[],d=[],f=[],p=[];for(i=0;a>i;i++)o.push([]),l.push([]),c.push([]),u.push([]),h.push([]),d.push([]),f.push([]),p.push([]);var g,v;for(g=0;a>g;g++){for(v=0;a>v;v++)o[g][v]=e[g][v],h[g][v]=t[g][v];for(v=a;r>v;v++)l[g][v-a]=e[g][v],d[g][v-a]=t[g][v]}for(g=a;r>g;g++){for(v=0;a>v;v++)c[g-a][v]=e[g][v],f[g-a][v]=t[g][v];for(v=a;r>v;v++)u[g-a][v-a]=e[g][v],p[g-a][v-a]=t[g][v]}var y=[],w=[],x=[],m=[],j=[],b=[],k=[],I=[],O=[],A=[];for(i=0;a>i;i++)y.push([]),w.push([]),x.push([]),m.push([]),j.push([]),b.push([]),k.push([]),I.push([]),O.push([]),A.push([]);for(g=0;a>g;g++)for(v=0;a>v;v++)y[g][v]=d[g][v]-p[g][v],w[g][v]=o[g][v]+l[g][v],x[g][v]=c[g][v]+u[g][v],m[g][v]=f[g][v]-h[g][v],j[g][v]=o[g][v]+u[g][v],b[g][v]=h[g][v]+p[g][v],k[g][v]=l[g][v]-u[g][v],I[g][v]=f[g][v]+p[g][v],O[g][v]=o[g][v]-c[g][v],A[g][v]=h[g][v]+d[g][v];var C=s(o,y),S=s(w,p),P=s(x,h),L=s(u,m),T=s(j,b),W=s(k,I),R=s(O,A);for(g=0;a>g;g++)for(v=0;a>v;v++)n[g][v]=T[g][v]+L[g][v]-S[g][v]+W[g][v],n[g][v+a]=C[g][v]+S[g][v],n[g+a][v]=P[g][v]+L[g][v],n[g+a][v+a]=T[g][v]+C[g][v]-P[g][v]-R[g][v]}return n}},{}],21:[function(e,t){"use strict";function r(t,r,s){this.id=s||Date.now();var i=e("./Renderer");this.renderer=n?null:new i(t,r,document.createElement("div")),this.width=t,this.height=r,Object.seal(this)}var n=e("./isWorker"),s=e("./Img"),i=e("lodash/array/flatten");r.prototype.render=function(e){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);t=i(t),n?postMessage({type:"canvas",value:{id:this.id,width:this.width,height:this.height,children:t}}):this.renderer.render(e)},r.prototype.toImage=function(e){e=e||Date.now();var t;return n?(postMessage({type:"canvas-image",value:{id:this.id,imageID:e}}),t=new s,t.id=e,t):(t=new Image,t.src=this.renderer.canvas.toDataURL("image/png"),void(s.cache[e]=t))},r.prototype.dispose=function(){return n?postMessage({type:"canvas-dispose",value:{id:this.id}}):void(r.cache[this.id]=null)},r.prototype.resize=function(e,t){return this.renderer.resize(e,t)},r.cache={},r.create=function(e,t,n){return new r(e,t,n)},Object.seal(r),Object.seal(r.prototype),t.exports=r},{"./Img":23,"./Renderer":25,"./isWorker":46,"lodash/array/flatten":4}],22:[function(e,t){"use strict";function r(e,t){this.id=e,this.grd=t,this.disposable=!0,Object.seal(this)}var n=e("./isWorker");r.cache={},r.prototype.cache=function(){return this.disposable=!1,n&&postMessage({type:"gradient-cache",value:{id:this.id}}),this},r.prototype.dispose=function(){return n?postMessage({type:"gradient-dispose",value:{id:this.id}}):void(r.cache[this.id]=null)},Object.seal(r),Object.seal(r.prototype),t.exports=r},{"./isWorker":46}],23:[function(e,t){"use strict";function r(e){this._src="",this.isDataUrl=!1,this.id=e||Date.now(),this.buffer=new ArrayBuffer,this.onload=function(){},this.texture=null,this.type="image",this.blobOptions={},Object.seal(this)}var n=e("path"),s=e("./isWorker"),i=e("./isDataUrl");r.cache={},Object.defineProperty(r.prototype,"src",{set:function(e){if("undefined"==typeof window){var t=this;if(this._src=e,this.isDataUrl=i(e),this.isDataUrl)this.id=""+Date.now();else{this.id=e;var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){t.buffer=this.response,t.blobOptions={type:"image/"+n.extname(t._src).slice(1)},t.generateTexture(this.response,t.blobOptions)},r.send()}}},get:function(){return this._src}}),r.prototype.generateTexture=function(e,t){var n,i={type:"image",value:{buffer:e,opts:t,id:this.id}};s?postMessage(i,[e]):(n=new Image,n.src=(window.URL||window.webkitURL).createObjectURL(new Blob([e],t)),r.cache[this.id]=n),this.onload()},r.prototype.dispose=function(){return s?postMessage({type:"image-dispose",value:{id:this.id}}):void(Image.cache[this.id]=null)},Object.seal(r),Object.seal(r.prototype),t.exports=r},{"./isDataUrl":45,"./isWorker":46,path:1}],24:[function(e,t){"use strict";function r(e,t){this.type=e,this.props=t,Object.seal(this)}Object.seal(r),Object.seal(r.prototype),t.exports=r},{}],25:[function(e,t){"use strict";function r(e,t,r,n){if(this.tree=null,this.ready=!1,this.frame=null,a)return this.worker=null,this.canvas=null,this.ctx=null,this.parent=null,void Object.seal(this);var s;n?(s=this.worker=new Worker(n),s.onmessage=this.workerCommand.bind(this)):this.worker=null,arguments.length<3?(r=this.parent=document.createElement("div"),r.style.margin="0 auto",r.style.width=e+"px",r.style.height=t+"px",document.body.appendChild(r)):this.parent=r,arguments.length<2&&(e=window.innerWidth,t=window.innerHeight);var i=document.createElement("canvas"),o=i.getContext("2d");i.width=e,i.height=t,r.appendChild(i),this.canvas=i,this.ctx=o,Object.seal(this)}var n=e("lodash/array/flatten"),s=null,i=null,a=e("./isWorker"),o=e("./createLinearGradient"),l=e("./createRadialGradient"),c=e("./Img"),u=2*Math.PI;r.prototype.render=function(){var t,r,o,l,h,d,f=[],p=[],g=[],v=[],y=[],w=this.ctx,x=[];for(s||(s=e("./Canvas")),i||(i=e("./Gradient")),t=0,r=arguments.length;r>t;t++)x.push(arguments[t]);if(x=n(x,!0),a)return this.sendBrowser("render",x);for(t=0,r=x.length;r>t;t++)if(o=x[t],l=o.props,h=o.type,"transform"!==h)if("scale"!==h)if("translate"!==h)if("rotate"!==h)if("restore"!==h)if("fillRect"!==o.type)if("strokeRect"!==o.type)if("clearRect"!==h)if("fillStyle"!==h)if("fillGradient"!=h)if("endFillStyle"!==h)if("lineStyle"!==h)if("endLineStyle"!==h)if("textStyle"!==h)if("endTextStyle"!==h)if("shadowStyle"!==h)if("endShadowStyle"!==h)if("text"!==h)if("drawImage"!==h)if("drawImageSize"!==h)if("drawImageSource"!==h)if("drawCanvas"!==h)if("drawCanvasSize"!==h)if("drawCanvasSource"!==h)"strokeArc"!==h?"strokeArc-counterclockwise"!==h?"fillArc"!==h&&"fillArc-counterclockwise"!==h?"moveTo"!==h?"lineTo"!==h?"bezierCurveTo"!==h?"quadraticCurveTo"!==h?"anticlockwise-arc"!==h?"arc"!==h?"full-arc"!==h?"quick-arc"!==h?"arcTo"!==h?"anticlockwise-ellipse"!==h?"ellipse"!==h?"full-ellipse"!==h?"quick-ellipse"!==h?"globalCompositeOperation"!==h?"endGlobalCompositeOperation"!==h?"fill"!==h?"stroke"!==h?"beginPath"!==h?"closePath"!==h||w.closePath():w.beginPath():w.stroke():w.fill():w.globalCompositeOperation=y.pop():(y.push(w.globalCompositeOperation),w.globalCompositeOperation=l.value):(this.save(),this.translate(l.x,l.y),this.scale(l.radiusX,l.radiusY),this.arc(0,0,1,0,u),this.restore()):(this.save(),this.translate(l.x,l.y),this.rotate(l.rotation),this.scale(l.radiusX,l.radiusY),this.arc(0,0,1,0,u),this.restore()):(this.save(),this.translate(l.x,l.y),this.rotate(l.rotation),this.scale(l.radiusX,l.radiusY),this.arc(0,0,1,l.startAngle,l.endAngle),this.restore()):(this.save(),this.translate(l.x,l.y),this.rotate(l.rotation),this.scale(l.radiusX,l.radiusY),this.arc(0,0,1,l.startAngle,l.endAngle,!0),this.restore()):w.arcTo(l.x1,l.y1,l.x2,l.y2,l.r):w.arc(0,0,l.r,0,u):w.arc(l.x,l.y,l.r,0,u):w.arc(l.x,l.y,l.r,l.startAngle,l.endAngle):w.arc(l.x,l.y,l.r,l.startAngle,l.endAngle,!0):w.quadraticCurveTo(l.cpx,l.cpy,l.x,l.y):w.bezierCurveTo(l.cp1x,l.cp1y,l.cp2x,l.cp2y,l.x,l.y):w.lineTo(l.x,l.y):w.moveTo(l.x,l.y):(w.beginPath(),w.arc(l.x,l.y,l.r,l.startAngle,l.endAngle),w.closePath(),w.fill()):(w.beginPath(),w.arc(l.x,l.y,l.r,l.startAngle,l.endAngle,!0),w.closePath(),w.stroke()):(w.beginPath(),w.arc(l.x,l.y,l.r,l.startAngle,l.endAngle),w.closePath(),w.stroke());else{if(!s.cache.hasOwnProperty(l.img))continue;w.drawImage(s.cache[l.img].renderer.canvas,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}else{if(!s.cache.hasOwnProperty(l.img))continue;w.drawImage(s.cache[l.img].renderer.canvas,l.dx,l.dy,l.dWidth,l.dHeight)}else{if(!s.cache.hasOwnProperty(l.img))continue;w.drawImage(s.cache[l.img].renderer.canvas,l.dx,l.dy)}else{if(!c.cache.hasOwnProperty(l.img))continue;w.drawImage(c.cache[l.img],l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}else{if(!c.cache.hasOwnProperty(l.img))continue;w.drawImage(c.cache[l.img],l.dx,l.dy,l.dWidth,l.dHeight)}else{if(!c.cache.hasOwnProperty(l.img))continue;w.drawImage(c.cache[l.img],l.dx,l.dy)}else{if(0!==l.maxWidth){l.fill&&w.fillText(l.text,l.x,l.y,l.maxWidth),l.stroke&&w.strokeText(l.text,l.x,l.y,l.maxWidth);continue}l.fill&&w.fillText(l.text,l.x,l.y),l.stroke&&w.strokeText(l.text,l.x,l.y)}else d=v.pop(),w.shadowBlur=d.shadowBlur,w.shadowColor=d.shadowColor,w.shadowOffsetX=d.shadowOffsetX,w.shadowOffsetY=d.shadowOffsetY;else v.push({shadowBlur:w.shadowBlur,shadowColor:w.shadowColor,shadowOffsetX:w.shadowOffsetX,shadowOffsetY:w.shadowOffsetY}),null!==l.shadowBlur&&(w.shadowBlur=l.shadowBlur),null!==l.shadowColor&&(w.shadowColor=l.shadowColor),null!==l.shadowOffsetX&&(w.shadowOffsetX=l.shadowOffsetX),null!==l.shadowOffsetY&&(w.shadowOffsetY=l.shadowOffsetY);else d=g.pop(),w.font=d.font,w.textAlign=d.textAlign,w.textBaseline=d.textBaseline,w.direction=d.direction;else g.push({font:w.font,textAlign:w.textAlign,textBaseline:w.textBaseline,direction:w.direction}),null!==l.font&&(w.font=l.font),null!==l.textAlign&&(w.textAlign=l.textAlign),null!==l.textBaseline&&(w.textBaseline=l.textBaseline),null!==l.lineJoin&&(w.direction=l.direction);else d=p.pop(),w.strokeStyle=d.strokeStyle,w.lineWidth=d.lineWidth,w.lineCap=d.lineCap,w.lineJoin=d.lineJoin,w.miterLimit=d.miterLimit,w.setLineDash(d.lineDash),w.lineDashOffset=d.lineDashOffset;else p.push({strokeStyle:w.strokeStyle,lineWidth:w.lineWidth,lineCap:w.lineCap,lineJoin:w.lineJoin,miterLimit:w.miterLimit,lineDash:w.getLineDash(),lineDashOffset:w.lineDashOffset}),null!==l.strokeStyle&&(w.strokeStyle=l.strokeStyle),null!==l.lineWidth&&(w.lineWidth=l.lineWidth),null!==l.lineCap&&(w.lineCap=l.lineCap),null!==l.lineJoin&&(w.lineJoin=l.lineJoin),null!==l.miterLimit&&(w.miterLimit=l.miterLimit),l.lineDash.length>0&&w.setLineDash(l.lineDash),null!==l.lineDashOffset&&(w.lineDashOffset=l.lineDashOffset);else w.fillStyle=f.pop();else d=i.cache[l.value.id],f.push(w.fillStyle),w.fillStyle=d.grd,d.disposable&&setTimeout(d.dispose.bind(d),0);else f.push(w.fillStyle),w.fillStyle=l.value;else w.clearRect(l.x,l.y,l.width,l.height);else w.strokeRect(l.x,l.y,l.width,l.height);else w.fillRect(l.x,l.y,l.width,l.height);else w.restore();else w.save(),w.rotate(o.props.r);else w.save(),w.translate(o.props.x,o.props.y);else w.save(),w.scale(l.x,l.y);else w.save(),w.transform(l.a,l.b,l.c,l.d,l.e,l.f)},r.create=function(e,t,n,s){return arguments.length>2?new r(e,t,n,s):2===arguments.length?new r(e,t):new r},r.prototype.workerCommand=function(t){var r,n=t.data;return s||(s=e("./Canvas")),i||(i=e("./Gradient")),"ready"===n.type?(this.ready=!0,this.sendWorker("frame",{}),this.hookRender()):"image"===n.type?(r=new c(n.value.id),r.generateTexture(n.value.buffer,n.value.opts)):"image-dispose"===n.type?void(c.cache.hasOwnProperty(n.value.id)&&(c.cache[n.value.id]=null)):("render"===n.type&&(this.tree=this.tree?this.tree.concat(n.value):n.value,this.frame||(this.frame=requestAnimationFrame(this.hookRender.bind(this)))),"renderer-resize"===n.type?this.resize(n.value.width,n.value.height):"canvas"===n.type?(s.cache.hasOwnProperty(n.value.id)||(s.cache[n.value.id]=new s(n.value.width,n.value.height,n.value.id)),r=s.cache[n.value.id],r.resize(n.value.width,n.value.height),s.cache[n.value.id].render(n.value.children)):"canvas-image"===n.type&&s.cache.hasOwnProperty(n.value.id)?void s.cache[n.value.id].toImage(n.value.imageID):"canvas-dispose"===n.type?void(s.cache.hasOwnProperty(n.value.id)&&s.cache[n.value.id]&&s.cache[n.value.id].dispose()):"linear-gradient"===n.type?void(i.cache[n.value.id]=o(n.value.x0,n.value.y0,n.value.x1,n.value.y1,n.value.children,n.value.id)):"radial-gradient"===n.type?void(i.cache[n.value.id]=l(n.value.x0,n.value.y0,n.value.r0,n.value.x1,n.value.y1,n.value.r1,n.value.children,n.value.id)):"gradient-dispose"===n.type?void(i.cache.hasOwnProperty(n.value.id)&&i.cache[n.value.id].dispose()):"gradient-cache"===n.type?void(i.cache.hasOwnProperty(n.value.id)&&i.cache[n.value.id].cache()):void 0)},r.prototype.resize=function(e,t){return a?this.sendBrowser("renderer-resize",{width:e,height:t}):(""+this.canvas.width!=""+e&&(this.canvas.width=e),void(""+this.canvas.height!=""+t&&(this.canvas.height=t)))},r.prototype.hookRender=function(){if(this.ready){if(null===this.tree)return requestAnimationFrame(this.hookRender.bind(this));this.sendWorker("frame",{}),this.render(this.tree),this.tree=null,this.frame=null}},r.prototype.sendWorker=function(e,t){return this.worker.postMessage({type:e,value:t})},r.prototype.sendBrowser=function(e,t){return postMessage({type:e,value:t})},Object.seal(r),Object.seal(r.prototype),t.exports=r},{"./Canvas":21,"./Gradient":22,"./Img":23,"./createLinearGradient":35,"./createRadialGradient":36,"./isWorker":46,"lodash/array/flatten":4}],26:[function(e,t){"use strict";function r(e,t){return new n("addColorStop",{offset:e,color:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],27:[function(e,t){"use strict";function r(e,t,r,s,i,a){return arguments.length>5?new n(a?"anticlockwise-arc":"arc",{x:e,y:t,r:r,startAngle:s,endAngle:i}):5===arguments.length?new n("arc",{x:e,y:t,r:r,startAngle:s,endAngle:i}):arguments.length<3?arguments.length<1?new n("quick-arc",{r:1}):new n("quick-arc",{r:e}):new n("full-arc",{x:e,y:t,r:r})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],28:[function(e,t){"use strict";function r(e,t,r,s,i){return new n("arcTo",{x1:e,y1:t,x2:r,y2:s,r:i})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],29:[function(e,t){"use strict";function r(){return new n("beginPath")}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],30:[function(e,t){"use strict";function r(e,t,r,s,i,a){return new n("bezierCurveTo",{cp1x:e,cp1y:t,cp2x:r,cp2y:s,x:i,y:a})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],31:[function(e,t){"use strict";function r(e,t,r,s){return arguments.length>2?new n("clearRect",{x:e,y:t,width:r,height:s}):new n("clearRect",{x:0,y:0,width:e,height:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],32:[function(e,t){"use strict";function r(e){return[n()].concat(e).concat([s()])}var n=e("./beginPath"),s=e("./clipPath");t.exports=r},{"./beginPath":29,"./clipPath":33}],33:[function(e,t){"use strict";function r(){return new n("clipPath")}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],34:[function(e,t){"use strict";function r(){return new n("closePath")}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],35:[function(e,t){"use strict";function r(e,t,r,i,a,o){if(o=o||Date.now(),n)return postMessage({type:"linear-gradient",value:{id:o,x0:e,y0:t,x1:r,y1:i,children:a}}),new s(o,null);for(var l,c=document.createElement("canvas").getContext("2d"),u=c.createLinearGradient(e,t,r,i),h=new s(o,u),d=0;d<a.length;d++)l=a[d],u.addColorStop(l.props.offset,l.props.color);return s.cache[o]=h,h}var n=e("./isWorker"),s=e("./Gradient");r.cache={},t.exports=r},{"./Gradient":22,"./isWorker":46}],36:[function(e,t){"use strict";function r(e,t,r,i,a,o,l,c){if(c=c||Date.now(),n)return postMessage({type:"radial-gradient",value:{id:c,x0:e,r0:r,y0:t,x1:i,y1:a,r1:o,children:l}}),new s(c,null);for(var u,h=document.createElement("canvas").getContext("2d"),d=h.createRadialGradient(e,t,r,i,a,o),f=new s(c,d),p=0;p<l.length;p++)u=l[p],d.addColorStop(u.props.offset,u.props.color);return s.cache[c]=f,f}var n=e("./isWorker"),s=e("./Gradient");t.exports=r},{"./Gradient":22,"./isWorker":46}],37:[function(e,t){"use strict";function r(e,t,r,s,i,a,o,l,c){return 9===arguments.length?new n("drawCanvasSource",{img:e.id,sx:t,sy:r,sWidth:s,sHeight:i,dx:a,dy:o,dWidth:l,dHeight:c}):arguments.length<5?arguments.length<3?new n("drawCanvas",{img:e.id,dx:0,dy:0}):new n("drawCanvas",{img:e.id,dx:t,dy:r}):new n("drawCanvasSize",{img:e.id,dx:t,dy:r,dWidth:s,dHeight:i})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],38:[function(e,t){"use strict";function r(e,t,r,s,i,a,o,l,c){return 9===arguments.length?new n("drawImageSource",{img:e.id,sx:t,sy:r,sWidth:s,sHeight:i,dx:a,dy:o,dWidth:l,dHeight:c}):arguments.length<5?arguments.length<3?new n("drawImage",{img:e.id,dx:0,dy:0}):new n("drawImage",{img:e.id,dx:t,dy:r}):new n("drawImageSize",{img:e.id,dx:t,dy:r,dWidth:s,dHeight:i})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],39:[function(e,t){"use strict";function r(e,t,r,s,i,a,o,l){return arguments.length>7?new n(l?"anticlockwise-ellipse":"ellipse",{x:e,y:t,radiusX:r,radiusY:s,startAngle:a,endAngle:o}):7===arguments.length?new n("ellipse",{x:e,y:t,radiusX:r,radiusY:s,rotation:i,startAngle:a,endAngle:o}):arguments.length<5?4===arguments.length?new n("quick-ellipse",{x:e,y:t,radiusX:r,radiusY:s}):new n("quick-ellipse",{x:0,y:0,radiusX:e,radiusY:t}):new n("full-ellipse",{x:e,y:t,radiusX:r,radiusY:s,rotation:i})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],40:[function(e,t){"use strict";function r(){return new n("fill")}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],41:[function(e,t){"use strict";function r(e,t,r,i,a,o){return arguments.length>=6&&o?new n("fillArc-counterclockwise",{x:e,y:t,r:r,startAngle:i,endAngle:a}):arguments.length>3?new n("fillArc",{x:e,y:t,r:r,startAngle:i,endAngle:a}):arguments.length>1?new n("fillArc",{x:e,y:t,r:r,startAngle:0,endAngle:s}):new n("fillArc",{x:0,y:0,r:e,startAngle:0,endAngle:s})}var n=e("./Instruction"),s=2*Math.PI;t.exports=r},{"./Instruction":24}],42:[function(e,t){"use strict";function r(e,t,r,s){return arguments.length<4?new n("fillRect",{x:0,y:0,width:e,height:t}):new n("fillRect",{x:e,y:t,width:r,height:s})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],43:[function(e,t){"use strict";function r(e,t){var r;return e instanceof s&&(r=new n("fillGradient",{value:{id:e.id}})),r||(r=new n("fillStyle",{value:e})),[r].concat(t).concat([new n("endFillStyle")])}var n=e("./Instruction"),s=e("./Gradient");t.exports=r},{"./Gradient":22,"./Instruction":24}],44:[function(e){"use strict";e("./Instruction")},{"./Instruction":24}],45:[function(e,t){function r(e){return!!e.match(r.regex)}r.regex=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i,Object.seal(r),t.exports=r},{}],46:[function(e,t){"use strict";t.exports="undefined"==typeof document},{}],47:[function(e,t){"use strict";function r(e,t){e=e||{};var r={strokeStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:[],lineDashOffset:null};return void 0!==e.strokeStyle&&(r.strokeStyle=e.strokeStyle),void 0!==e.lineWidth&&(r.lineWidth=e.lineWidth),void 0!==e.lineCap&&(r.lineCap=e.lineCap),void 0!==e.lineJoin&&(r.lineJoin=e.lineJoin),void 0!==e.miterLimit&&(r.miterLimit=e.miterLimit),void 0!==e.lineDash&&(r.lineDash=e.lineDash),void 0!==e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset),[new n("lineStyle",r)].concat(t).concat([new n("endLineStyle")])}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],48:[function(e,t){"use strict";function r(e,t){return 0===arguments.length?new n("lineTo",{x:0,y:0}):new n("lineTo",{x:e,y:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],49:[function(e,t){"use strict";function r(e,t){return 0===arguments.length?new n("moveTo",{x:0,y:0}):new n("moveTo",{x:e,y:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],50:[function(e,t){"use strict";function r(e){return[n()].concat(e).concat([s()])}var n=e("./beginPath"),s=e("./closePath");t.exports=r},{"./beginPath":29,"./closePath":34}],51:[function(e,t){"use strict";function r(e,t,r,s){return new n("quadraticCurveTo",{cpx:e,cpy:t,x:r,y:s})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],52:[function(e,t){"use strict";function r(e,t){e=+e,t=t||[];var r=[new n("rotate",{r:e})];return r=r.concat(s(t)),r.push(new n("restore")),r}var n=e("./Instruction"),s=e("lodash/array/flatten");t.exports=r},{"./Instruction":24,"lodash/array/flatten":4}],53:[function(e,t){"use strict";function r(e,t,r){e=+e,t=+t,r=r||[];var i=[new n("scale",{x:e,y:t})];return i=i.concat(s(r)),i.push(new n("restore")),i}var n=e("./Instruction"),s=e("lodash/array/flatten");t.exports=r},{"./Instruction":24,"lodash/array/flatten":4}],54:[function(e,t){"use strict";function r(e,t){e=e||{};var r={shadowBlur:null,shadowColor:null,shadowOffsetX:null,shadowOffsetY:null};return void 0!==e.shadowBlur&&(r.shadowBlur=e.shadowBlur),void 0!==e.shadowColor&&(r.shadowColor=e.shadowColor),void 0!==e.shadowOffsetX&&(r.shadowOffsetX=e.shadowOffsetX),void 0!==e.direction&&(r.shadowOffsetY=e.shadowOffsetY),[new n("shadowStyle",e)].concat(t).concat([new n("endShadowStyle")])}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],55:[function(e,t){"use strict";function r(){return new n("stroke")}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],56:[function(e,t){"use strict";function r(e,t,r,i,a,o){return arguments.length>=6&&o?new n("strokeArc-counterclockwise",{x:e,y:t,r:r,startAngle:i,endAngle:a}):arguments.length>3?new n("strokeArc",{x:e,y:t,r:r,startAngle:i,endAngle:a}):arguments.length>1?new n("strokeArc",{x:e,y:t,r:r,startAngle:0,endAngle:s}):new n("strokeArc",{x:0,y:0,r:e,startAngle:0,endAngle:s})}var n=e("./Instruction"),s=2*Math.PI;t.exports=r},{"./Instruction":24}],57:[function(e,t){"use strict";function r(e,t,r,s){return arguments.length>2?new n("strokeRect",{x:e,y:t,width:r,height:s}):new n("strokeRect",{x:0,y:0,width:e,height:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],58:[function(e,t){"use strict";function r(e,t,r,s,i,a){return 6===arguments.length?new n("text",{x:t,y:r,fill:s,stroke:i,text:e,maxWidth:a}):5===arguments.length?new n("text",{x:t,y:r,fill:s,stroke:i,text:e,maxWidth:0}):4===arguments.length?new n("text",{x:t,y:r,fill:s,stroke:!1,text:e,maxWidth:0}):3===arguments.length?new n("text",{x:t,y:r,fill:!0,stroke:!1,text:e,maxWidth:0}):new n("text",{x:0,y:0,fill:!0,stroke:!1,text:e,maxWidth:0})}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],59:[function(e,t){"use strict";function r(e,t){e=e||{};var r={font:null,textAlign:null,textBaseline:null,direction:null};return void 0!==e.font&&(r.font=e.font),void 0!==e.textAlign&&(r.textAlign=e.textAlign),void 0!==e.textBaseline&&(r.textBaseline=e.textBaseline),void 0!==e.direction&&(r.direction=e.direction),[new n("textStyle",e)].concat(t).concat([new n("endTextStyle")])
}var n=e("./Instruction");t.exports=r},{"./Instruction":24}],60:[function(e,t){"use strict";function r(e,t){var r,n,a,o,l,c,u,h=[[1,0,0],[0,1,0],[0,0,1]],d=[],f=e.length;for(n=0;f>n;n++)r=e[n],r.hasOwnProperty("transform")?h=s(h,[[r.transform.a,r.transform.c,r.transform.e],[r.transform.b,r.transform.d,r.transform.f],[0,0,1]]):(r.hasOwnProperty("translate")&&(l=r.translate.x,c=r.translate.y,h=s(h,[[1,0,l],[0,1,c],[0,0,1]])),r.hasOwnProperty("scale")&&(l=r.scale.x,c=r.scale.y,h=s(h,[[l,0,0],[0,c,0],[0,0,1]])),r.hasOwnProperty("rotate")&&(o=Math.sin(r.rotate),a=Math.cos(r.rotate),h=s(h,[[a,-o,0],[o,a,0],[0,0,1]])));return u={a:h[0][0],b:h[1][0],c:h[0][1],d:h[1][1],e:h[0][2],f:h[1][2]},d.concat(new i("transform",u)).concat(t).concat([new i("restore")])}function n(e,t){var r=e[0];return[new i("transform",{a:r.props.a,b:r.props.b,c:r.props.c,d:r.props.d,e:r.props.e,f:r.props.f})].concat(t).concat([new i("restore")])}var s=e("square-matrix-multiply"),i=e("./Instruction");r.copy=n,t.exports=r},{"./Instruction":24,"square-matrix-multiply":20}],61:[function(e,t){"use strict";function r(e,t,r){e=+e,t=+t,r=r||[];var i=[new n("translate",{x:e,y:t})];return i=i.concat(s(r)),i.push(new n("restore")),i}var n=e("./Instruction"),s=e("lodash/array/flatten");t.exports=r},{"./Instruction":24,"lodash/array/flatten":4}]},{},[3])(3)});