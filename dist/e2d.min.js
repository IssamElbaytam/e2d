!function e(t,r,n){function i(a,o){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var c=Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,o,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,o=Array(i-1),l=1;i>l;l++)o[l-1]=arguments[l];r.apply(this,o)}else if(s(r)){for(i=arguments.length,o=Array(i-1),l=1;i>l;l++)o[l-1]=arguments[l];for(c=r.slice(),i=c.length,l=0;i>l;l++)c[l].apply(this,o)}return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var i;i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,a,o;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(o=a;o-->0;)if(r[o]===t||r[o].listener&&r[o].listener===t){i=o;break}if(0>i)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0}},{}],2:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],3:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return i.exec(e).slice(1)};r.resolve=function(){for(var r="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var a=0>s?e.cwd():arguments[s];if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,i="/"===a.charAt(0))}return r=t(n(r.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(e){var i=r.isAbsolute(e),s="/"===a(e,-1);return e=t(n(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var i=n(e.split("/")),s=n(t.split("/")),a=Math.min(i.length,s.length),o=a,l=0;a>l;l++)if(i[l]!==s[l]){o=l;break}for(var c=[],l=o;l<i.length;l++)c.push("..");return c=c.concat(s.slice(o)),c.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=s(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=s(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return s(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return 0>t&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:4}],4:[function(e,t){function r(){c=!1,a.length?l=a.concat(l):u=-1,l.length&&n()}function n(){if(!c){var e=setTimeout(r);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a[u].run();u=-1,t=l.length}a=null,c=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var a,o=t.exports={},l=[],c=!1,u=-1;o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new i(e,t)),1!==l.length||c||setTimeout(n,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=s,o.addListener=s,o.once=s,o.off=s,o.removeListener=s,o.removeAllListeners=s,o.emit=s,o.binding=function(){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(){throw Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],5:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],6:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:a};return arguments.length<3||(n.depth=arguments[2]),arguments.length<4||(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&r._extend(n,t),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),l(n,e,n.depth)}function s(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e){return e}function o(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function l(e,t,n){if(e.customInspect&&t&&C(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return w(i)||(i=l(e,i,n)),i}var s=c(e,t);if(s)return s;var a=Object.keys(t),g=o(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),A(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(t);if(0===a.length){if(C(t)){var v=t.name?": "+t.name:"";return e.stylize("[Function"+v+"]","special")}if(O(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(I(t))return e.stylize(Date.prototype.toString.call(t),"date");if(A(t))return u(t)}var m="",y=!1,x=["{","}"];if(p(t)&&(y=!0,x=["[","]"]),C(t)){var b=t.name?": "+t.name:"";m=" [Function"+b+"]"}if(O(t)&&(m=" "+RegExp.prototype.toString.call(t)),I(t)&&(m=" "+Date.prototype.toUTCString.call(t)),A(t)&&(m=" "+u(t)),0===a.length&&(!y||0==t.length))return x[0]+m+x[1];if(0>n)return O(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var k;return k=y?h(e,t,n,g,a):a.map(function(r){return f(e,t,n,g,r,y)}),e.seen.pop(),d(k,m,x)}function c(e,t){if(b(t))return e.stylize("undefined","undefined");if(w(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,i){for(var s=[],a=0,o=t.length;o>a;++a)s.push(R(t,a+"")?f(e,t,r,n,a+"",!0):"");return i.forEach(function(i){i.match(/^\d+$/)||s.push(f(e,t,r,n,i,!0))}),s}function f(e,t,r,n,i,s){var a,o,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?o=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(o=e.stylize("[Setter]","special")),R(n,i)||(a="["+i+"]"),o||(e.seen.indexOf(c.value)<0?(o=v(r)?l(e,c.value,null):l(e,c.value,r-1),o.indexOf("\n")>-1&&(o=s?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n"))):o=e.stylize("[Circular]","special")),b(a)){if(s&&i.match(/^\d+$/))return o;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+o}function d(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")<0||n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function p(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function v(e){return null===e}function m(e){return null==e}function y(e){return"number"==typeof e}function w(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function b(e){return void 0===e}function O(e){return k(e)&&"[object RegExp]"===S(e)}function k(e){return"object"==typeof e&&null!==e}function I(e){return k(e)&&"[object Date]"===S(e)}function A(e){return k(e)&&("[object Error]"===S(e)||e instanceof Error)}function C(e){return"function"==typeof e}function P(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function S(e){return Object.prototype.toString.call(e)}function L(e){return 10>e?"0"+e.toString(10):e.toString(10)}function j(){var e=new Date,t=[L(e.getHours()),L(e.getMinutes()),L(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var _=/%[sdj%]/g;r.format=function(e){if(!w(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,s=n.length,a=(e+"").replace(_,function(e){if("%%"===e)return"%";if(r>=s)return e;switch(e){case"%s":return n[r++]+"";case"%d":return+n[r++];case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),o=n[r];s>r;o=n[++r])a+=v(o)||!k(o)?" "+o:" "+i(o);return a},r.deprecate=function(e,i){function s(){if(!a){if(t.throwDeprecation)throw Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(b(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return s};var E,W={};r.debuglog=function(e){if(b(E)&&(E=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!W[e])if(RegExp("\\b"+e+"\\b","i").test(E)){var n=t.pid;W[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else W[e]=function(){};return W[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=p,r.isBoolean=g,r.isNull=v,r.isNullOrUndefined=m,r.isNumber=y,r.isString=w,r.isSymbol=x,r.isUndefined=b,r.isRegExp=O,r.isObject=k,r.isDate=I,r.isError=A,r.isFunction=C,r.isPrimitive=P,r.isBuffer=e("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",j(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!k(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":5,_process:4,inherits:2}],7:[function(e,t){"use strict";t.exports={addColorStop:e("./src/addColorStop"),arc:e("./src/arc"),arcTo:e("./src/arcTo"),beginPath:e("./src/beginPath"),bezierCurveTo:e("./src/bezierCurveTo"),Canvas:e("./src/Canvas"),clearRect:e("./src/clearRect"),clip:e("./src/clip"),clipPath:e("./src/clipPath"),closePath:e("./src/closePath"),createLinearGradient:e("./src/createLinearGradient"),createRadialGradient:e("./src/createRadialGradient"),drawCanvas:e("./src/drawCanvas"),drawImage:e("./src/drawImage"),ellipse:e("./src/ellipse"),fill:e("./src/fill"),fillArc:e("./src/fillArc"),fillImage:e("./src/fillImage"),fillImagePattern:e("./src/fillImagePattern"),fillRect:e("./src/fillRect"),fillStyle:e("./src/fillStyle"),globalAlpha:e("./src/globalAlpha"),globalCompositeOperation:e("./src/globalCompositeOperation"),Gradient:e("./src/Gradient"),hitRect:e("./src/hitRect"),hitRegion:e("./src/hitRegion"),Img:e("./src/Img"),Instruction:e("./src/Instruction"),isDataUrl:e("./src/isDataUrl"),isWorker:e("./src/isWorker"),lineStyle:e("./src/lineStyle"),lineTo:e("./src/lineTo"),moveTo:e("./src/moveTo"),path:e("./src/path"),quadraticCurveTo:e("./src/quadraticCurveTo"),Renderer:e("./src/Renderer"),rotate:e("./src/rotate"),scale:e("./src/scale"),shadowStyle:e("./src/shadowStyle"),stroke:e("./src/stroke"),strokeArc:e("./src/strokeArc"),strokeRect:e("./src/strokeRect"),text:e("./src/text"),textStyle:e("./src/textStyle"),transform:e("./src/transform"),transformPoints:e("./src/transformPoints"),translate:e("./src/translate")}},{"./src/Canvas":34,"./src/Gradient":35,"./src/Img":36,"./src/Instruction":37,"./src/Renderer":38,"./src/addColorStop":39,"./src/arc":40,"./src/arcTo":41,"./src/beginPath":42,"./src/bezierCurveTo":43,"./src/clearRect":44,"./src/clip":45,"./src/clipPath":46,"./src/closePath":47,"./src/createLinearGradient":48,"./src/createRadialGradient":49,"./src/drawCanvas":50,"./src/drawImage":51,"./src/ellipse":52,"./src/fill":53,"./src/fillArc":54,"./src/fillImage":55,"./src/fillImagePattern":56,"./src/fillRect":57,"./src/fillStyle":58,"./src/globalAlpha":59,"./src/globalCompositeOperation":60,"./src/hitRect":61,"./src/hitRegion":62,"./src/isDataUrl":64,"./src/isWorker":65,"./src/lineStyle":66,"./src/lineTo":67,"./src/moveTo":68,"./src/path":69,"./src/quadraticCurveTo":70,"./src/rotate":71,"./src/scale":72,"./src/shadowStyle":73,"./src/stroke":74,"./src/strokeArc":75,"./src/strokeRect":76,"./src/text":77,"./src/textStyle":78,"./src/transform":79,"./src/transformPoints":80,"./src/translate":81}],8:[function(e,t,r){r=t.exports=function(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return a[e];var r=e+"",s=n[r.toLowerCase()];if(s)return s;var s=i[r.toLowerCase()];return s?s:1===r.length?r.charCodeAt(0):void 0};var n=r.code=r.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"right click":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=r.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:33,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */
for(s=97;123>s;s++)n[String.fromCharCode(s)]=s-32;for(var s=48;58>s;s++)n[s-48]=s;for(s=1;13>s;s++)n["f"+s]=s+111;for(s=0;10>s;s++)n["numpad "+s]=s+96;var a=r.names=r.title={};for(s in n)a[n[s]]=s;for(var o in i)n[o]=i[o]},{}],9:[function(e,t){function r(e,t,r){var s=e?e.length:0;return r&&i(e,t,r)&&(t=!1),s?n(e,t):[]}var n=e("../internal/baseFlatten"),i=e("../internal/isIterateeCall");t.exports=r},{"../internal/baseFlatten":11,"../internal/isIterateeCall":20}],10:[function(e,t){function r(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}t.exports=r},{}],11:[function(e,t){function r(e,t,l,c){c||(c=[]);for(var u=-1,h=e.length;++u<h;){var f=e[u];o(f)&&a(f)&&(l||s(f)||i(f))?t?r(f,t,l,c):n(c,f):l||(c[c.length]=f)}return c}var n=e("./arrayPush"),i=e("../lang/isArguments"),s=e("../lang/isArray"),a=e("./isArrayLike"),o=e("./isObjectLike");t.exports=r},{"../lang/isArguments":24,"../lang/isArray":25,"./arrayPush":10,"./isArrayLike":18,"./isObjectLike":22}],12:[function(e,t){var r=e("./createBaseFor"),n=r();t.exports=n},{"./createBaseFor":15}],13:[function(e,t){function r(e,t){return n(e,t,i)}var n=e("./baseFor"),i=e("../object/keysIn");t.exports=r},{"../object/keysIn":31,"./baseFor":12}],14:[function(e,t){function r(e){return function(t){return null==t?void 0:t[e]}}t.exports=r},{}],15:[function(e,t){function r(e){return function(t,r,i){for(var s=n(t),a=i(t),o=a.length,l=e?o:-1;e?l--:++l<o;){var c=a[l];if(r(s[c],c,s)===!1)break}return t}}var n=e("./toObject");t.exports=r},{"./toObject":23}],16:[function(e,t){var r=e("./baseProperty"),n=r("length");t.exports=n},{"./baseProperty":14}],17:[function(e,t){function r(e,t){var r=null==e?void 0:e[t];return n(r)?r:void 0}var n=e("../lang/isNative");t.exports=r},{"../lang/isNative":28}],18:[function(e,t){function r(e){return null!=e&&i(n(e))}var n=e("./getLength"),i=e("./isLength");t.exports=r},{"./getLength":16,"./isLength":21}],19:[function(e,t){function r(e,t){return e="number"==typeof e||n.test(e)?+e:-1,t=null==t?i:t,e>-1&&e%1==0&&t>e}var n=/^\d+$/,i=9007199254740991;t.exports=r},{}],20:[function(e,t){function r(e,t,r){if(!s(r))return!1;var a=typeof t;if("number"==a?n(r)&&i(t,r.length):"string"==a&&t in r){var o=r[t];return e===e?e===o:o!==o}return!1}var n=e("./isArrayLike"),i=e("./isIndex"),s=e("../lang/isObject");t.exports=r},{"../lang/isObject":29,"./isArrayLike":18,"./isIndex":19}],21:[function(e,t){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&n>=e}var n=9007199254740991;t.exports=r},{}],22:[function(e,t){function r(e){return!!e&&"object"==typeof e}t.exports=r},{}],23:[function(e,t){function r(e){return n(e)?e:Object(e)}var n=e("../lang/isObject");t.exports=r},{"../lang/isObject":29}],24:[function(e,t){function r(e){return i(e)&&n(e)&&a.call(e,"callee")&&!o.call(e,"callee")}var n=e("../internal/isArrayLike"),i=e("../internal/isObjectLike"),s=Object.prototype,a=s.hasOwnProperty,o=s.propertyIsEnumerable;t.exports=r},{"../internal/isArrayLike":18,"../internal/isObjectLike":22}],25:[function(e,t){var r=e("../internal/getNative"),n=e("../internal/isLength"),i=e("../internal/isObjectLike"),s="[object Array]",a=Object.prototype,o=a.toString,l=r(Array,"isArray"),c=l||function(e){return i(e)&&n(e.length)&&o.call(e)==s};t.exports=c},{"../internal/getNative":17,"../internal/isLength":21,"../internal/isObjectLike":22}],26:[function(e,t){function r(e){return!!e&&1===e.nodeType&&n(e)&&!i(e)}var n=e("../internal/isObjectLike"),i=e("./isPlainObject");t.exports=r},{"../internal/isObjectLike":22,"./isPlainObject":30}],27:[function(e,t){function r(e){return n(e)&&a.call(e)==i}var n=e("./isObject"),i="[object Function]",s=Object.prototype,a=s.toString;t.exports=r},{"./isObject":29}],28:[function(e,t){function r(e){return null==e?!1:n(e)?c.test(o.call(e)):i(e)&&s.test(e)}var n=e("./isFunction"),i=e("../internal/isObjectLike"),s=/^\[object .+?Constructor\]$/,a=Object.prototype,o=Function.prototype.toString,l=a.hasOwnProperty,c=RegExp("^"+o.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},{"../internal/isObjectLike":22,"./isFunction":27}],29:[function(e,t){function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=r},{}],30:[function(e,t){function r(e){var t;if(!s(e)||c.call(e)!=a||i(e)||!l.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return n(e,function(e,t){r=t}),void 0===r||l.call(e,r)}var n=e("../internal/baseForIn"),i=e("./isArguments"),s=e("../internal/isObjectLike"),a="[object Object]",o=Object.prototype,l=o.hasOwnProperty,c=o.toString;t.exports=r},{"../internal/baseForIn":13,"../internal/isObjectLike":22,"./isArguments":24}],31:[function(e,t){function r(e){if(null==e)return[];o(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(i(e)||n(e))&&t||0;for(var r=e.constructor,l=-1,u="function"==typeof r&&r.prototype===e,h=Array(t),f=t>0;++l<t;)h[l]=l+"";for(var d in e)f&&s(d,t)||"constructor"==d&&(u||!c.call(e,d))||h.push(d);return h}var n=e("../lang/isArguments"),i=e("../lang/isArray"),s=e("../internal/isIndex"),a=e("../internal/isLength"),o=e("../lang/isObject"),l=Object.prototype,c=l.hasOwnProperty;t.exports=r},{"../internal/isIndex":19,"../internal/isLength":21,"../lang/isArguments":24,"../lang/isArray":25,"../lang/isObject":29}],32:[function(e,t){t.exports=function(e,t){for(var r=e[0],n=e[1],i=!1,s=0,a=t.length-1;s<t.length;a=s++){var o=t[s][0],l=t[s][1],c=t[a][0],u=t[a][1],h=l>n!=u>n&&(c-o)*(n-l)/(u-l)+o>r;h&&(i=!i)}return i}},{}],33:[function(e,t){"use strict";var r=(t.exports=function(e,t,i){switch(i&&i.toLowerCase()){case"strassen":return n(e,t);case"naive":default:return r(e,t)}},function(e,t){for(var r=e.length,n=[],i=0;r>i;i++)n.push([]);for(var s=0;r>s;s++)for(var a=0;r>a;a++){n[s][a]=0;for(var o=0;r>o;o++)n[s][a]=n[s][a]+e[s][o]*t[o][a]}return n}),n=function i(e,t){for(var r=e.length,n=[],s=0;r>s;s++)n.push([]);if(1==r)n[0][0]=e[0][0]*t[0][0];else{var a=r/2,o=[],l=[],c=[],u=[],h=[],f=[],d=[],p=[];for(s=0;a>s;s++)o.push([]),l.push([]),c.push([]),u.push([]),h.push([]),f.push([]),d.push([]),p.push([]);var g,v;for(g=0;a>g;g++){for(v=0;a>v;v++)o[g][v]=e[g][v],h[g][v]=t[g][v];for(v=a;r>v;v++)l[g][v-a]=e[g][v],f[g][v-a]=t[g][v]}for(g=a;r>g;g++){for(v=0;a>v;v++)c[g-a][v]=e[g][v],d[g-a][v]=t[g][v];for(v=a;r>v;v++)u[g-a][v-a]=e[g][v],p[g-a][v-a]=t[g][v]}var m=[],y=[],w=[],x=[],b=[],O=[],k=[],I=[],A=[],C=[];for(s=0;a>s;s++)m.push([]),y.push([]),w.push([]),x.push([]),b.push([]),O.push([]),k.push([]),I.push([]),A.push([]),C.push([]);for(g=0;a>g;g++)for(v=0;a>v;v++)m[g][v]=f[g][v]-p[g][v],y[g][v]=o[g][v]+l[g][v],w[g][v]=c[g][v]+u[g][v],x[g][v]=d[g][v]-h[g][v],b[g][v]=o[g][v]+u[g][v],O[g][v]=h[g][v]+p[g][v],k[g][v]=l[g][v]-u[g][v],I[g][v]=d[g][v]+p[g][v],A[g][v]=o[g][v]-c[g][v],C[g][v]=h[g][v]+f[g][v];var P=i(o,m),S=i(y,p),L=i(w,h),j=i(u,x),R=i(b,O),_=i(k,I),E=i(A,C);for(g=0;a>g;g++)for(v=0;a>v;v++)n[g][v]=R[g][v]+j[g][v]-S[g][v]+_[g][v],n[g][v+a]=P[g][v]+S[g][v],n[g+a][v]=L[g][v]+j[g][v],n[g+a][v+a]=R[g][v]+P[g][v]-L[g][v]-E[g][v]}return n}},{}],34:[function(e,t){"use strict";function r(t,r,i){this.id=i||a();var s=e("./Renderer");this.renderer=n?null:new s(t,r,document.createElement("div")),this.width=t,this.height=r,Object.seal(this)}var n=e("./isWorker"),i=e("./Img"),s=e("lodash/array/flatten"),a=e("./id");r.prototype.render=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);e=s(e),n?postMessage({type:"canvas",value:{id:this.id,width:this.width,height:this.height,children:e}}):this.renderer.render(e)},r.prototype.toImage=function(e){var t;return t=new i(e||a()),n?(postMessage({type:"canvas-image",value:{id:this.id,imageID:e}}),t):(t.src=this.renderer.canvas.toDataURL("image/png"),t)},r.prototype.dispose=function(){if(n)return postMessage({type:"canvas-dispose",value:{id:this.id}});r.cache[this.id]=null;var e=r.cachable.indexOf(this.id);e>-1&&r.cachable.splice(e,1)},r.prototype.cache=function(){if(n)return postMessage({type:"canvas-cache",value:{id:this.id}});var e=r.cachable.indexOf(this.id);return-1===e&&r.cachable.push(this.id),this},r.cleanUp=function(){for(var e,t={},n=0;n<r.cachable.length;n++)e=r.cachable[n],t[e]=r.cache[e];r.cache=t},r.prototype.resize=function(e,t){return this.renderer.resize(e,t)},r.cache={},r.cachable=[],r.create=function(e,t,n){return new r(e,t,n)},Object.seal(r),Object.seal(r.prototype),t.exports=r},{"./Img":36,"./Renderer":38,"./id":63,"./isWorker":65,"lodash/array/flatten":9}],35:[function(e,t){"use strict";function r(e,t){this.id=e,this.grd=t,r.cache[e]=this,Object.seal(this)}var n=e("./isWorker");r.cache={},r.cachable=[],r.prototype.cache=function(){return n?postMessage({type:"gradient-cache",value:{id:this.id}}):r.cachable.push(this.id),this},r.prototype.dispose=function(){if(n)return postMessage({type:"gradient-dispose",value:{id:this.id}});r.cache[this.id]=null;var e=r.cachable.indexOf(this.id);-1!==e&&r.cachable.splice(e,1)},r.cleanUp=function(){for(var e,t={},n=0;n<r.cachable.length;n++)e=r.cachable[n],t[e]=r.cache[e];r.cache=t},Object.seal(r),Object.seal(r.prototype),t.exports=r},{"./isWorker":65}],36:[function(e,t){"use strict";function r(e){s.EventEmitter.call(this),this._src="",this.isDataUrl=!1,this.id=e||o(),this.buffer=new ArrayBuffer,this.onload=function(){},this.texture=null,this.type="image",this.blobOptions={},this.imageElement=null,this.imagePattern=null,this.imagePatternRepeat=null,n&&postMessage({type:"image",value:{id:this.id,src:""}}),Object.seal(this)}var n=(e("path"),e("./isWorker")),i=e("./isDataUrl"),s=e("events"),a=e("util"),o=e("./id");a.inherits(r,s.EventEmitter),r.cache={},r.cachable=[],Object.defineProperty(r.prototype,"src",{set:function(e){if(this.isDataUrl=i(e),n)return r.cache[this.id]=this,void postMessage({type:"image-source",value:{id:this.id,src:e}});var t=new Image;this.imageElement=t,t.src=e,t.onload=this.imageLoad.bind(this)},get:function(){return this._src}}),r.prototype.imageLoad=function(){if(!n){var e=document.createElement("canvas").getContext("2d");this.imagePattern=e.createPattern(this.imageElement,"no-repeat"),this.imagePatternRepeat=e.createPattern(this.imageElement,"repeat")}return r.cache[this.id]=this,this.emit("load",this)},r.prototype.cache=function(){return n?postMessage({type:"image-cache",value:{id:this.id}}):r.cachable.push(this.id),this},r.prototype.dispose=function(){if(n)return postMessage({type:"image-dispose",value:{id:this.id}});r.cache[this.id]=null;var e=r.cachable.indexOf(this.id);-1!==e&&r.cachable.splice(e,1)},r.cleanUp=function(){for(var e,t={},n=0;n<r.cachable.length;n++)e=r.cachable[n],t[e]=r.cache[e];r.cache=t},Object.seal(r),Object.seal(r.prototype),t.exports=r},{"./id":63,"./isDataUrl":64,"./isWorker":65,events:1,path:3,util:6}],37:[function(e,t){"use strict";function r(e,t){this.type=e,this.props=t,Object.seal(this)}Object.seal(r),Object.seal(r.prototype),t.exports=r},{}],38:[function(e,t){"use strict";function r(t,r,n,l){return u.EventEmitter.call(this),s||(s=e("./Canvas")),a||(a=e("./Gradient")),f||(a=e("./Gradient")),this.tree=null,this.isReady=!1,this.mouseState="up",this.mouseData={x:0,y:0,state:this.mouseState},this.mouseRegions=[],this.activeRegions=[],this.keyData={},o?(this.worker=null,this.canvas=null,this.ctx=null,this.parent=null,addEventListener("message",this.browserCommand.bind(this)),void Object.seal(this)):(l?(this.worker=l instanceof Worker?l:new Worker(l),this.worker.onmessage=this.workerCommand.bind(this)):this.worker=null,n&&i(n)?this.parent=n:(this.parent=document.createElement("div"),this.parent.style.margin="0 auto",this.parent.style.width=t+"px",this.parent.style.height=r+"px",document.body.appendChild(this.parent)),t&&t>0||(t=window.innerWidth),r&&r>0||(r=window.innerHeight),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=r,this.parent.appendChild(this.canvas),this.hookMouseEvents(),this.hookKeyboardEvents(),void Object.seal(this))}var n=e("lodash/array/flatten"),i=e("lodash/lang/isElement"),s=null,a=null,o=e("./isWorker"),l=e("./createLinearGradient"),c=e("./createRadialGradient"),u=e("events"),h=e("util"),f=e("./Img"),d=e("keycode"),p=e("square-matrix-multiply"),g=e("./transformPoints"),v=e("point-in-polygon"),m=2*Math.PI,y=[[1,0,0],[0,1,0],[0,0,1]];h.inherits(r,u.EventEmitter),r.prototype.render=function(){var e,t,r,i,l,c,u,h,d,v=[],w=[],x=[],b=[],O=[],k=[y],I=[],A=this.ctx,C=[];for(e=0,t=arguments.length;t>e;e++)C.push(arguments[e]);if(C=n(C,!0),o)return this.sendBrowser("render",C);for(this.mouseRegions=[],this.activeRegions=[],e=0,t=C.length;t>e;e++)if(r=C[e])if(i=r.props,l=r.type,"transform"!==l)if("scale"!==l)if("translate"!==l)if("rotate"!==l)if("restore"!==l)if("fillRect"!==l)if("strokeRect"!==l)if("clearRect"!==l)if("fillStyle"!==l)if("fillGradient"!=l)if("endFillStyle"!==l)if("lineStyle"!==l)if("endLineStyle"!==l)if("textStyle"!==l)if("endTextStyle"!==l)if("shadowStyle"!==l)if("endShadowStyle"!==l)if("text"!==l)if("drawImage"!==l)if("drawImageSize"!==l)if("drawImageSource"!==l){if("fillImagePattern"===l){if(!f.cache.hasOwnProperty(i.img))continue;A.fillStyle=f.cache[i.img].imagePatternRepeat,A.translate(i.dx,i.dy),A.fillRect(0,0,i.dWidth,i.dHeight),A.restore()}if("fillImage"!==l)if("fillImageSize"!==l)if("fillImageSource"!==l)if("drawCanvas"!==l)if("drawCanvasSize"!==l)if("drawCanvasSource"!==l)"strokeArc"!==l?"strokeArc-counterclockwise"!==l?"fillArc"!==l&&"fillArc-counterclockwise"!==l?"moveTo"!==l?"lineTo"!==l?"bezierCurveTo"!==l?"quadraticCurveTo"!==l?"anticlockwise-arc"!==l?"arc"!==l?"full-arc"!==l?"quick-arc"!==l?"arcTo"!==l?"anticlockwise-ellipse"!==l?"ellipse"!==l?"full-ellipse"!==l?"quick-ellipse"!==l?"globalCompositeOperation"!==l?"endGlobalCompositeOperation"!==l?"fill"!==l?"stroke"!==l?"clipPath"!==l?"beginPath"!==l?"closePath"!==l?"globalAlpha"!==l?"endGlobalAlpha"!==l?"hitRegion"!==l||this.mouseRegions.push({id:i.id,points:g(i.points,k[k.length-1])}):A.globalAlpha=O.pop():(O.push(A.globalAlpha),A.globalAlpha*=i.value):A.closePath():A.beginPath():A.clip():A.stroke():A.fill():A.globalCompositeOperation=I.pop():(I.push(A.globalCompositeOperation),A.globalCompositeOperation=i.value):(this.save(),this.translate(i.x,i.y),this.scale(i.radiusX,i.radiusY),this.arc(0,0,1,0,m),this.restore()):(this.save(),this.translate(i.x,i.y),this.rotate(i.rotation),this.scale(i.radiusX,i.radiusY),this.arc(0,0,1,0,m),this.restore()):(this.save(),this.translate(i.x,i.y),this.rotate(i.rotation),this.scale(i.radiusX,i.radiusY),this.arc(0,0,1,i.startAngle,i.endAngle),this.restore()):(this.save(),this.translate(i.x,i.y),this.rotate(i.rotation),this.scale(i.radiusX,i.radiusY),this.arc(0,0,1,i.startAngle,i.endAngle,!0),this.restore()):A.arcTo(i.x1,i.y1,i.x2,i.y2,i.r):A.arc(0,0,i.r,0,m):A.arc(i.x,i.y,i.r,0,m):A.arc(i.x,i.y,i.r,i.startAngle,i.endAngle):A.arc(i.x,i.y,i.r,i.startAngle,i.endAngle,!0):A.quadraticCurveTo(i.cpx,i.cpy,i.x,i.y):A.bezierCurveTo(i.cp1x,i.cp1y,i.cp2x,i.cp2y,i.x,i.y):A.lineTo(i.x,i.y):A.moveTo(i.x,i.y):(A.beginPath(),A.arc(i.x,i.y,i.r,i.startAngle,i.endAngle),A.closePath(),A.fill()):(A.beginPath(),A.arc(i.x,i.y,i.r,i.startAngle,i.endAngle,!0),A.closePath(),A.stroke()):(A.beginPath(),A.arc(i.x,i.y,i.r,i.startAngle,i.endAngle),A.closePath(),A.stroke());else{if(!s.cache.hasOwnProperty(i.img))continue;A.drawImage(s.cache[i.img].renderer.canvas,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}else{if(!s.cache.hasOwnProperty(i.img))continue;A.drawImage(s.cache[i.img].renderer.canvas,i.dx,i.dy,i.dWidth,i.dHeight)}else{if(!s.cache.hasOwnProperty(i.img))continue;A.drawImage(s.cache[i.img].renderer.canvas,i.dx,i.dy)}else{if(!f.cache.hasOwnProperty(i.img))continue;c=f.cache[i.img].imageElement,A.save(),A.fillStyle=f.cache[i.img].imagePattern,A.translate(i.dx,i.dy),A.scale(c.dWidth/i.sWidth,c.dHeight/i.sHeight),A.translate(-i.sx,-i.sy),A.fillRect(i.sx,i.sy,i.sWidth,i.sHeight),A.restore()}else{if(!f.cache.hasOwnProperty(i.img))continue;c=f.cache[i.img].imageElement,A.save(),A.fillStyle=f.cache[i.img].imagePattern,A.translate(i.dx,i.dy),A.scale(i.dWidth/c.width,i.dHeight/c.height),A.fillRect(0,0,c.width,c.height),A.restore()}else{if(!f.cache.hasOwnProperty(i.img))continue;c=f.cache[i.img].imageElement,A.save(),A.fillStyle=f.cache[i.img].imagePattern,A.translate(i.dx,i.dy),A.fillRect(0,0,c.width,c.height),A.restore()}}else{if(!f.cache.hasOwnProperty(i.img))continue;A.drawImage(f.cache[i.img].imageElement||new Image,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}else{if(!f.cache.hasOwnProperty(i.img))continue;A.drawImage(f.cache[i.img].imageElement||new Image,i.dx,i.dy,i.dWidth,i.dHeight)}else{if(!f.cache.hasOwnProperty(i.img))continue;A.drawImage(f.cache[i.img].imageElement||new Image,i.dx,i.dy)}else{if(0!==i.maxWidth){i.fill&&A.fillText(i.text,i.x,i.y,i.maxWidth),i.stroke&&A.strokeText(i.text,i.x,i.y,i.maxWidth);continue}i.fill&&A.fillText(i.text,i.x,i.y),i.stroke&&A.strokeText(i.text,i.x,i.y)}else c=b.pop(),A.shadowBlur=c.shadowBlur,A.shadowColor=c.shadowColor,A.shadowOffsetX=c.shadowOffsetX,A.shadowOffsetY=c.shadowOffsetY;else b.push({shadowBlur:A.shadowBlur,shadowColor:A.shadowColor,shadowOffsetX:A.shadowOffsetX,shadowOffsetY:A.shadowOffsetY}),null!==i.shadowBlur&&(A.shadowBlur=i.shadowBlur),null!==i.shadowColor&&(A.shadowColor=i.shadowColor),null!==i.shadowOffsetX&&(A.shadowOffsetX=i.shadowOffsetX),null!==i.shadowOffsetY&&(A.shadowOffsetY=i.shadowOffsetY);else c=x.pop(),A.font=c.font,A.textAlign=c.textAlign,A.textBaseline=c.textBaseline,A.direction=c.direction;else x.push({font:A.font,textAlign:A.textAlign,textBaseline:A.textBaseline,direction:A.direction}),null!==i.font&&(A.font=i.font),null!==i.textAlign&&(A.textAlign=i.textAlign),null!==i.textBaseline&&(A.textBaseline=i.textBaseline),null!==i.lineJoin&&(A.direction=i.direction);else c=w.pop(),A.strokeStyle=c.strokeStyle,A.lineWidth=c.lineWidth,A.lineCap=c.lineCap,A.lineJoin=c.lineJoin,A.miterLimit=c.miterLimit,A.setLineDash(c.lineDash),A.lineDashOffset=c.lineDashOffset;else w.push({strokeStyle:A.strokeStyle,lineWidth:A.lineWidth,lineCap:A.lineCap,lineJoin:A.lineJoin,miterLimit:A.miterLimit,lineDash:A.getLineDash(),lineDashOffset:A.lineDashOffset}),null!==i.strokeStyle&&(A.strokeStyle=i.strokeStyle),null!==i.lineWidth&&(A.lineWidth=i.lineWidth),null!==i.lineCap&&(A.lineCap=i.lineCap),null!==i.lineJoin&&(A.lineJoin=i.lineJoin),null!==i.miterLimit&&(A.miterLimit=i.miterLimit),i.lineDash.length>0&&A.setLineDash(i.lineDash),null!==i.lineDashOffset&&(A.lineDashOffset=i.lineDashOffset);else A.fillStyle=v.pop();else v.push(A.fillStyle),a.cache.hasOwnProperty(i.value.id)&&(A.fillStyle=a.cache[i.value.id].grd);else v.push(A.fillStyle),A.fillStyle=i.value;else A.clearRect(i.x,i.y,i.width,i.height);else A.strokeRect(i.x,i.y,i.width,i.height);else A.fillRect(i.x,i.y,i.width,i.height);else k.pop(),A.restore();else d=Math.cos(i.r),h=Math.cos(i.r),u=p(k[k.length-1],[[d,-h,0],[h,d,0],[0,0,1]]),c={a:u[0][0],b:u[1][0],c:u[0][1],d:u[1][1],e:u[0][2],f:u[1][2]},k.push(u),A.save(),A.rotate(i.r);else u=p(k[k.length-1],[[1,0,i.x],[0,1,i.y],[0,0,1]]),c={a:u[0][0],b:u[1][0],c:u[0][1],d:u[1][1],e:u[0][2],f:u[1][2]},k.push(u),A.save(),A.translate(i.x,i.y);else u=p(k[k.length-1],[[i.x,0,0],[0,i.y,0],[0,0,1]]),c={a:u[0][0],b:u[1][0],c:u[0][1],d:u[1][1],e:u[0][2],f:u[1][2]},k.push(u),A.save(),A.scale(i.x,i.y);else u=p(k[k.length-1],[[i.a,i.c,i.e],[i.b,i.d,i.f],[0,0,1]]),c={a:u[0][0],b:u[1][0],c:u[0][1],d:u[1][1],e:u[0][2],f:u[1][2]},k.push(u),A.save(),A.transform(i.a,i.b,i.c,i.d,i.e,i.f)},r.create=function(e,t,n,i){return arguments.length>2?new r(e,t,n,i):2===arguments.length?new r(e,t):new r},r.prototype.workerCommand=function(t){var r,n=t.data;if(s||(s=e("./Canvas")),a||(a=e("./Gradient")),"ready"===n.type)return this.ready();if("image"===n.type)return r=new f(n.value.id),void(f.cache[n.value.id]=r);if("image-source"===n.type)return void(f.cache.hasOwnProperty(n.value.id)&&(r=f.cache[n.value.id],r.src=n.value.src,r.once("load",function(){this.sendWorker("image-load",n.value)}.bind(this))));if("image-cache"===n.type)return void(f.cache.hasOwnProperty(n.value.id)&&f.cache[n.value.id].cache());if("image-dispose"===n.type)return void(f.cache.hasOwnProperty(n.value.id)&&f.cache[n.value.id].dispose());if("render"===n.type)return void(this.tree=n.value);if("renderer-resize"===n.type)return this.resize(n.value.width,n.value.height);if("canvas"===n.type)return s.cache.hasOwnProperty(n.value.id)||(s.cache[n.value.id]=new s(n.value.width,n.value.height,n.value.id)),r=s.cache[n.value.id],r.resize(n.value.width,n.value.height),s.cache[n.value.id].render(n.value.children);if("canvas-image"===n.type&&s.cache.hasOwnProperty(n.value.id))return void s.cache[n.value.id].toImage(n.value.imageID);if("canvas-cache"===n.type)return void(s.cache.hasOwnProperty(n.value.id)&&s.cache[n.value.id]&&s.cache[n.value.id].cache());if("canvas-dispose"===n.type&&s.cache.hasOwnProperty(n.value.id)&&s.cache[n.value.id])return s.cache[n.value.id].dispose();if("linear-gradient"===n.type)return void(a.cache[n.value.id]=l(n.value.x0,n.value.y0,n.value.x1,n.value.y1,n.value.children,n.value.id));if("radial-gradient"===n.type)return void(a.cache[n.value.id]=c(n.value.x0,n.value.y0,n.value.r0,n.value.x1,n.value.y1,n.value.r1,n.value.children,n.value.id));if("gradient-dispose"!==n.type){if("gradient-cache"!==n.type)return"style"===n.type?this.style(n.value):this.emit(n.type,n.value);if(a.cache.hasOwnProperty(n.value.id))return a.cachable.push(n.value.id)}else if(a.cache.hasOwnProperty(n.value.id))return a.cache[n.value.id].dispose()},r.prototype.resize=function(e,t){return o?this.sendBrowser("renderer-resize",{width:e,height:t}):(""+this.canvas.width!=""+e&&(this.canvas.width=e),void(""+this.canvas.height!=""+t&&(this.canvas.height=t)))},r.prototype.hookRender=function(){var e=!0;return this.isReady&&(this.worker?null!==this.tree?(this.fireFrame(),this.render(this.tree),this.tree=null):e=!1:this.fireFrame(),e&&setTimeout(this.cleanUpCache.bind(this),0)),requestAnimationFrame(this.hookRender.bind(this))},r.prototype.cleanUpCache=function(){return f.cleanUp(),s.cleanUp(),a.cleanUp()},r.prototype.sendWorker=function(e,t){return this.worker?this.worker.postMessage({type:e,value:t}):this.emit(e,t)},r.prototype.sendBrowser=function(e,t){return postMessage({type:e,value:t})},r.prototype.sendAll=function(e,t){return o?this.sendBrowser(e,t):this.sendWorker(e,t),this.emit(e,t)},r.prototype.hookMouseEvents=function(){return document.addEventListener("mousemove",this.mouseMove.bind(this)),this.canvas.addEventListener("mousedown",this.mouseDown.bind(this)),document.addEventListener("mouseup",this.mouseUp.bind(this))},r.prototype.mouseMove=function(e){var t,r=this.canvas.getBoundingClientRect(),n=[0,0];n[0]=e.clientX-r.left,n[1]=e.clientY-r.top;for(var i=0;i<this.mouseRegions.length;i++)t=this.mouseRegions[i],v(n,t.points)&&(this.activeRegions.push(t.id),this.mouseRegions.splice(this.mouseRegions.indexOf(t),1),i-=1);return this.mouseData={x:n[0],y:n[1],state:this.mouseState,activeRegions:this.activeRegions},this.sendWorker("mouse",this.mouseData),e.preventDefault(),!1},r.prototype.mouseDown=function(e){return this.mouseState="down",this.mouseMove(e)},r.prototype.mouseUp=function(e){return this.mouseState="up",this.mouseMove(e)},r.prototype.hookKeyboardEvents=function(){for(var e in d.code)d.code.hasOwnProperty(e)&&(this.keyData[e]="up");return this.canvas.addEventListener("keydown",this.keyDown.bind(this)),document.addEventListener("keyUp",this.keyUp.bind(this))},r.prototype.keyChange=function(e){return this.sendWorker("key",this.keyData),e.preventDefault(),!1},r.prototype.keyDown=function(e){return this.keyData[d.code[e.keyCode]]="down",this.keyChange(e)},r.prototype.keyUp=function(e){return this.keyData[d.code[e.keyCode]]="up",this.keyChange(e)},r.prototype.browserCommand=function(e){return"image-load"===e.data.type&&f.cache[e.data.value.id].emit("load"),this.emit(e.data.type,e.data.value)},r.prototype.fireFrame=function(){return this.sendWorker("frame",{})},r.prototype.style=function(){for(var e,t,r,i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);if(i=n(i),o)this.sendBrowser("style",i);else for(s=0;s<i.length;s++){e=i[s];for(t in e)if(e.hasOwnProperty(t)){if(r=e[t],null===r){this.canvas.style.removeProperty(t);continue}this.canvas.style.setProperty(t,r)}}},r.prototype.ready=function(){return o?void this.sendBrowser("ready"):(this.isReady=!0,this.fireFrame(),requestAnimationFrame(this.hookRender.bind(this)))},Object.seal(r),Object.seal(r.prototype),t.exports=r},{"./Canvas":34,"./Gradient":35,"./Img":36,"./createLinearGradient":48,"./createRadialGradient":49,"./isWorker":65,"./transformPoints":80,events:1,keycode:8,"lodash/array/flatten":9,"lodash/lang/isElement":26,"point-in-polygon":32,"square-matrix-multiply":33,util:6}],39:[function(e,t){"use strict";function r(e,t){return new n("addColorStop",{offset:e,color:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],40:[function(e,t){"use strict";function r(e,t,r,i,s,a){return arguments.length>5?new n(a?"anticlockwise-arc":"arc",{x:e,y:t,r:r,startAngle:i,endAngle:s}):5===arguments.length?new n("arc",{x:e,y:t,r:r,startAngle:i,endAngle:s}):arguments.length<3?arguments.length<1?new n("quick-arc",{r:1}):new n("quick-arc",{r:e}):new n("full-arc",{x:e,y:t,r:r})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],41:[function(e,t){"use strict";function r(e,t,r,i,s){return new n("arcTo",{x1:e,y1:t,x2:r,y2:i,r:s})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],42:[function(e,t){"use strict";function r(){return new n("beginPath")}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],43:[function(e,t){"use strict";function r(e,t,r,i,s,a){return new n("bezierCurveTo",{cp1x:e,cp1y:t,cp2x:r,cp2y:i,x:s,y:a})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],44:[function(e,t){"use strict";function r(e,t,r,i){return arguments.length>2?new n("clearRect",{x:e,y:t,width:r,height:i}):new n("clearRect",{x:0,y:0,width:e,height:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],45:[function(e,t){"use strict";function r(){for(var e=[n()],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.push(i()),e}var n=e("./beginPath"),i=e("./clipPath");t.exports=r},{"./beginPath":42,"./clipPath":46}],46:[function(e,t){"use strict";function r(){return new n("clipPath")}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],47:[function(e,t){"use strict";function r(){return new n("closePath")}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],48:[function(e,t){"use strict";function r(e,t,r,a,o,l){if(l=l||s(),n)return postMessage({type:"linear-gradient",value:{id:l,x0:e,y0:t,x1:r,y1:a,children:o}}),new i(l,null);for(var c,u=document.createElement("canvas").getContext("2d"),h=u.createLinearGradient(e,t,r,a),f=new i(l,h),d=0;d<o.length;d++)c=o[d],h.addColorStop(c.props.offset,c.props.color);return f}var n=e("./isWorker"),i=(e("lodash/array/flatten"),e("./Gradient")),s=e("./id");t.exports=r},{"./Gradient":35,"./id":63,"./isWorker":65,"lodash/array/flatten":9}],49:[function(e,t){"use strict";function r(e,t,r,a,o,l,c,u){if(u=u||s(),n)return postMessage({type:"radial-gradient",value:{id:u,x0:e,r0:r,y0:t,x1:a,y1:o,r1:l,children:c}}),new i(u,null);for(var h,f=document.createElement("canvas").getContext("2d"),d=f.createRadialGradient(e,t,r,a,o,l),p=new i(u,d),g=0;g<c.length;g++)h=c[g],d.addColorStop(h.props.offset,h.props.color);return p}var n=e("./isWorker"),i=e("./Gradient"),s=e("./id");t.exports=r},{"./Gradient":35,"./id":63,"./isWorker":65}],50:[function(e,t){"use strict";function r(e,t,r,i,s,a,o,l,c){return 9===arguments.length?new n("drawCanvasSource",{img:e.id,sx:t,sy:r,sWidth:i,sHeight:s,dx:a,dy:o,dWidth:l,dHeight:c}):arguments.length<5?arguments.length<3?new n("drawCanvas",{img:e.id,dx:0,dy:0}):new n("drawCanvas",{img:e.id,dx:t,dy:r}):new n("drawCanvasSize",{img:e.id,dx:t,dy:r,dWidth:i,dHeight:s})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],51:[function(e,t){"use strict";function r(e,t,r,i,s,a,o,l,c){return 9===arguments.length?new n("drawImageSource",{img:e.id,sx:t,sy:r,sWidth:i,sHeight:s,dx:a,dy:o,dWidth:l,dHeight:c}):arguments.length<5?arguments.length<3?new n("drawImage",{img:e.id,dx:0,dy:0}):new n("drawImage",{img:e.id,dx:t,dy:r}):new n("drawImageSize",{img:e.id,dx:t,dy:r,dWidth:i,dHeight:s})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],52:[function(e,t){"use strict";function r(e,t,r,i,s,a,o,l){return arguments.length>7?new n(l?"anticlockwise-ellipse":"ellipse",{x:e,y:t,radiusX:r,radiusY:i,startAngle:a,endAngle:o}):7===arguments.length?new n("ellipse",{x:e,y:t,radiusX:r,radiusY:i,rotation:s,startAngle:a,endAngle:o}):arguments.length<5?4===arguments.length?new n("quick-ellipse",{x:e,y:t,radiusX:r,radiusY:i}):new n("quick-ellipse",{x:0,y:0,radiusX:e,radiusY:t}):new n("full-ellipse",{x:e,y:t,radiusX:r,radiusY:i,rotation:s})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],53:[function(e,t){"use strict";function r(){return new n("fill")}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],54:[function(e,t){"use strict";function r(e,t,r,s,a,o){return arguments.length>=6&&o?new n("fillArc-counterclockwise",{x:e,y:t,r:r,startAngle:s,endAngle:a}):arguments.length>3?new n("fillArc",{x:e,y:t,r:r,startAngle:s,endAngle:a}):arguments.length>1?new n("fillArc",{x:e,y:t,r:r,startAngle:0,endAngle:i}):new n("fillArc",{x:0,y:0,r:e,startAngle:0,endAngle:i})}var n=e("./Instruction"),i=2*Math.PI;t.exports=r},{"./Instruction":37}],55:[function(e,t){"use strict";function r(e,t,r,i,s,a,o,l,c){return 9===arguments.length?new n("fillImageSource",{img:e.id,sx:t,sy:r,sWidth:i,sHeight:s,dx:a,dy:o,dWidth:l,dHeight:c}):arguments.length<5?arguments.length<3?new n("fillImage",{img:e.id,dx:0,dy:0}):new n("fillImage",{img:e.id,dx:t,dy:r}):new n("fillImageSize",{img:e.id,dx:t,dy:r,dWidth:i,dHeight:s})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],56:[function(e,t){"use strict";function r(e,t,r,i,s){return arguments.length<5?arguments.length<3?new n("fillImagePattern",{img:e.id,dx:0,dy:0,dWidth:0,dHeight:0}):new n("fillImagePattern",{img:e.id,dx:0,dy:0,dWidth:t,dHeight:r}):new n("fillImagePattern",{img:e.id,dx:t,dy:r,dWidth:i,dHeight:s})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],57:[function(e,t){"use strict";function r(e,t,r,i){return arguments.length<4?new n("fillRect",{x:0,y:0,width:e,height:t}):new n("fillRect",{x:e,y:t,width:r,height:i})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],58:[function(e,t){"use strict";function r(e){var t;e instanceof i&&(t=new n("fillGradient",{value:{id:e.id}})),t||(t=new n("fillStyle",{value:e}));for(var r=[t],s=1;s<arguments.length;s++)r.push(arguments[s]);return r.push(new n("endFillStyle")),r}var n=e("./Instruction"),i=e("./Gradient");t.exports=r},{"./Gradient":35,"./Instruction":37}],59:[function(e,t){"use strict";function r(e){for(var t=[new n("globalAlpha",{value:e})],r=1;r<arguments.length;r++)t.push(arguments[r]);return t.push(new n("endGlobalAlpha")),t}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],60:[function(e,t){"use strict";function r(e){var t=[new n("globalCompositeOperation",{value:e})];if(0===arguments.length)return[];for(var r=1;r<arguments.length;r++)t.push(arguments[r]);return t.push(new n("endGlobalCompositeOperation")),t}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],61:[function(e,t){"use strict";function r(e,t,r,i,s){arguments.length>3||(i=t,s=r,t=0,r=0);var a=[[t,r],[t,r+s],[t+i,r+s],[t+i,r]];return n(e,a)}var n=(e("./Instruction"),e("./hitRegion"));t.exports=r},{"./Instruction":37,"./hitRegion":62}],62:[function(e,t){"use strict";function r(e,t){return new n("hitRegion",{id:e,points:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],63:[function(e,t){"use strict";function r(){return Date.now()+"-"+Math.random()}t.exports=r},{}],64:[function(e,t){function r(e){return!!e.match(r.regex)}r.regex=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i,Object.seal(r),t.exports=r
},{}],65:[function(e,t){"use strict";t.exports="undefined"==typeof document},{}],66:[function(e,t){"use strict";function r(e){e=e||{};var t={strokeStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:[],lineDashOffset:null};void 0!==e.strokeStyle&&(t.strokeStyle=e.strokeStyle),void 0!==e.lineWidth&&(t.lineWidth=e.lineWidth),void 0!==e.lineCap&&(t.lineCap=e.lineCap),void 0!==e.lineJoin&&(t.lineJoin=e.lineJoin),void 0!==e.miterLimit&&(t.miterLimit=e.miterLimit),void 0!==e.lineDash&&(t.lineDash=e.lineDash),void 0!==e.lineDashOffset&&(t.lineDashOffset=e.lineDashOffset);for(var r=[new n("lineStyle",t)],i=1;i<arguments.length;i++)r.push(arguments[i]);return r.push(new n("endLineStyle")),r}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],67:[function(e,t){"use strict";function r(e,t){return 0===arguments.length?new n("lineTo",{x:0,y:0}):new n("lineTo",{x:e,y:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],68:[function(e,t){"use strict";function r(e,t){return 0===arguments.length?new n("moveTo",{x:0,y:0}):new n("moveTo",{x:e,y:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],69:[function(e,t){"use strict";function r(){for(var e=[n()],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.push(i()),e}var n=e("./beginPath"),i=e("./closePath");t.exports=r},{"./beginPath":42,"./closePath":47}],70:[function(e,t){"use strict";function r(e,t,r,i){return new n("quadraticCurveTo",{cpx:e,cpy:t,x:r,y:i})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],71:[function(e,t){"use strict";function r(e){e=+e;for(var t=[new n("rotate",{r:e})],r=1;r<arguments.length;r++)t.push(arguments[r]);return t.push(new n("restore")),t}{var n=e("./Instruction");e("lodash/array/flatten")}t.exports=r},{"./Instruction":37,"lodash/array/flatten":9}],72:[function(e,t){"use strict";function r(e,t,r){var i=2;"number"!=typeof t&&(t=e,i=1),r=r||[];for(var s=[new n("scale",{x:e,y:t})];i<arguments.length;i++)s.push(arguments[i]);return s.push(new n("restore")),s}{var n=e("./Instruction");e("lodash/array/flatten")}t.exports=r},{"./Instruction":37,"lodash/array/flatten":9}],73:[function(e,t){"use strict";function r(e){e=e||{};var t={shadowBlur:null,shadowColor:null,shadowOffsetX:null,shadowOffsetY:null};void 0!==e.shadowBlur&&(t.shadowBlur=e.shadowBlur),void 0!==e.shadowColor&&(t.shadowColor=e.shadowColor),void 0!==e.shadowOffsetX&&(t.shadowOffsetX=e.shadowOffsetX),void 0!==e.direction&&(t.shadowOffsetY=e.shadowOffsetY);for(var r=[new n("shadowStyle",e)],i=1;i<arguments.length;i++)r.push(arguments[i]);return r.push(new n("endShadowStyle")),r}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],74:[function(e,t){"use strict";function r(){return new n("stroke")}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],75:[function(e,t){"use strict";function r(e,t,r,s,a,o){return arguments.length>=6&&o?new n("strokeArc-counterclockwise",{x:e,y:t,r:r,startAngle:s,endAngle:a}):arguments.length>3?new n("strokeArc",{x:e,y:t,r:r,startAngle:s,endAngle:a}):arguments.length>1?new n("strokeArc",{x:e,y:t,r:r,startAngle:0,endAngle:i}):new n("strokeArc",{x:0,y:0,r:e,startAngle:0,endAngle:i})}var n=e("./Instruction"),i=2*Math.PI;t.exports=r},{"./Instruction":37}],76:[function(e,t){"use strict";function r(e,t,r,i){return arguments.length>2?new n("strokeRect",{x:e,y:t,width:r,height:i}):new n("strokeRect",{x:0,y:0,width:e,height:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],77:[function(e,t){"use strict";function r(e,t,r,i,s,a){return 6===arguments.length?new n("text",{x:t,y:r,fill:i,stroke:s,text:e,maxWidth:a}):5===arguments.length?new n("text",{x:t,y:r,fill:i,stroke:s,text:e,maxWidth:0}):4===arguments.length?new n("text",{x:t,y:r,fill:i,stroke:!1,text:e,maxWidth:0}):3===arguments.length?new n("text",{x:t,y:r,fill:!0,stroke:!1,text:e,maxWidth:0}):new n("text",{x:0,y:0,fill:!0,stroke:!1,text:e,maxWidth:0})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],78:[function(e,t){"use strict";function r(e){e=e||{};var t={font:null,textAlign:null,textBaseline:null,direction:null};void 0!==e.font&&(t.font=e.font),void 0!==e.textAlign&&(t.textAlign=e.textAlign),void 0!==e.textBaseline&&(t.textBaseline=e.textBaseline),void 0!==e.direction&&(t.direction=e.direction);for(var r=[new n("textStyle",e)],i=1;i<arguments.length;i++)r.push(arguments[i]);return r.push(new n("endTextStyle")),r}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],79:[function(e,t){"use strict";function r(e){var t,r,n,a,o,l,c,u,h=[[1,0,0],[0,1,0],[0,0,1]],f=e.length;for(r=0;f>r;r++)t=e[r],t.hasOwnProperty("transform")?h=i(h,[[t.transform.a,t.transform.c,t.transform.e],[t.transform.b,t.transform.d,t.transform.f],[0,0,1]]):(t.hasOwnProperty("translate")&&(o=t.translate.x,l=t.translate.y,h=i(h,[[1,0,o],[0,1,l],[0,0,1]])),t.hasOwnProperty("scale")&&(o=t.scale.x,l=t.scale.y,h=i(h,[[o,0,0],[0,l,0],[0,0,1]])),t.hasOwnProperty("rotate")&&(a=Math.sin(t.rotate),n=Math.cos(t.rotate),h=i(h,[[n,-a,0],[a,n,0],[0,0,1]])));for(c={a:h[0][0],b:h[1][0],c:h[0][1],d:h[1][1],e:h[0][2],f:h[1][2]},u=[new s("transform",c)],r=1;r<arguments.length;r++)u.push(arguments[r]);return u.push(new s("restore")),u}function n(e){for(var t=e[0],r=[new s("transform",{a:t.props.a,b:t.props.b,c:t.props.c,d:t.props.d,e:t.props.e,f:t.props.f})],n=1;n<arguments.length;n++)r.push(arguments[n]);return r.push(new s("restore")),r}var i=e("square-matrix-multiply"),s=e("./Instruction");r.copy=n,t.exports=r},{"./Instruction":37,"square-matrix-multiply":33}],80:[function(e,t){"use strict";function r(e,t){for(var r,n=[],i=e.length,s=0;i>s;s++)r=e[s],n.push([t[0][0]*r[0]+t[0][1]*r[1]+t[0][2],t[1][0]*r[0]+t[1][1]*r[1]+t[1][2]]);return n}t.exports=r},{}],81:[function(e,t){"use strict";function r(e,t){for(var r=[new n("translate",{x:e,y:t})],i=2;i<arguments.length;i++)r.push(arguments[i]);return r.push(new n("restore")),r}{var n=e("./Instruction");e("lodash/array/flatten")}t.exports=r},{"./Instruction":37,"lodash/array/flatten":9}]},{},[7]);