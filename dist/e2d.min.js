!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.e2d=e()}}(function(){return function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var u=Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[o]={exports:{}};t[o][0].call(l.exports,function(e){var r=t[o][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,a=Array(i-1),c=1;i>c;c++)a[c-1]=arguments[c];r.apply(this,a)}else if(s(r)){for(i=arguments.length,a=Array(i-1),c=1;i>c;c++)a[c-1]=arguments[c];for(u=r.slice(),i=u.length,c=0;i>c;c++)u[c].apply(this,a)}return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var i;i=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,o,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(a=o;a-->0;)if(r[a]===t||r[a].listener&&r[a].listener===t){i=a;break}if(0>i)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0}},{}],2:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],3:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return i.exec(e).slice(1)};r.resolve=function(){for(var r="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var o=0>s?e.cwd():arguments[s];if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(r=o+"/"+r,i="/"===o.charAt(0))}return r=t(n(r.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(e){var i=r.isAbsolute(e),s="/"===o(e,-1);return e=t(n(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var i=n(e.split("/")),s=n(t.split("/")),o=Math.min(i.length,s.length),a=o,c=0;o>c;c++)if(i[c]!==s[c]){a=c;break}for(var u=[],c=a;c<i.length;c++)u.push("..");return u=u.concat(s.slice(a)),u.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=s(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=s(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return s(e)[3]};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return 0>t&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:4}],4:[function(e,t){function r(){u=!1,o.length?c=o.concat(c):l=-1,c.length&&n()}function n(){if(!u){var e=setTimeout(r);u=!0;for(var t=c.length;t;){for(o=c,c=[];++l<t;)o[l].run();l=-1,t=c.length}o=null,u=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var o,a=t.exports={},c=[],u=!1,l=-1;a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new i(e,t)),1!==c.length||u||setTimeout(n,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=s,a.addListener=s,a.once=s,a.off=s,a.removeListener=s,a.removeAllListeners=s,a.emit=s,a.binding=function(){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(){throw Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],5:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],6:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:o};return arguments.length<3||(n.depth=arguments[2]),arguments.length<4||(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&r._extend(n,t),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),c(n,e,n.depth)}function s(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function o(e){return e}function a(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function c(e,t,n){if(e.customInspect&&t&&C(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return w(i)||(i=c(e,i,n)),i}var s=u(e,t);if(s)return s;var o=Object.keys(t),g=a(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),I(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(t);if(0===o.length){if(C(t)){var v=t.name?": "+t.name:"";return e.stylize("[Function"+v+"]","special")}if(k(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(A(t))return e.stylize(Date.prototype.toString.call(t),"date");if(I(t))return l(t)}var y="",m=!1,x=["{","}"];if(d(t)&&(m=!0,x=["[","]"]),C(t)){var b=t.name?": "+t.name:"";y=" [Function"+b+"]"}if(k(t)&&(y=" "+RegExp.prototype.toString.call(t)),A(t)&&(y=" "+Date.prototype.toUTCString.call(t)),I(t)&&(y=" "+l(t)),0===o.length&&(!m||0==t.length))return x[0]+y+x[1];if(0>n)return k(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var O;return O=m?h(e,t,n,g,o):o.map(function(r){return f(e,t,n,g,r,m)}),e.seen.pop(),p(O,y,x)}function u(e,t){if(b(t))return e.stylize("undefined","undefined");if(w(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,r,n,i){for(var s=[],o=0,a=t.length;a>o;++o)s.push(R(t,o+"")?f(e,t,r,n,o+"",!0):"");return i.forEach(function(i){i.match(/^\d+$/)||s.push(f(e,t,r,n,i,!0))}),s}function f(e,t,r,n,i,s){var o,a,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),R(n,i)||(o="["+i+"]"),a||(e.seen.indexOf(u.value)<0?(a=v(r)?c(e,u.value,null):c(e,u.value,r-1),a.indexOf("\n")>-1&&(a=s?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),b(o)){if(s&&i.match(/^\d+$/))return a;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function p(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")<0||n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function v(e){return null===e}function y(e){return null==e}function m(e){return"number"==typeof e}function w(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function b(e){return void 0===e}function k(e){return O(e)&&"[object RegExp]"===j(e)}function O(e){return"object"==typeof e&&null!==e}function A(e){return O(e)&&"[object Date]"===j(e)}function I(e){return O(e)&&("[object Error]"===j(e)||e instanceof Error)}function C(e){return"function"==typeof e}function L(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function j(e){return Object.prototype.toString.call(e)}function S(e){return 10>e?"0"+e.toString(10):e.toString(10)}function P(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var _=/%[sdj%]/g;r.format=function(e){if(!w(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,s=n.length,o=(e+"").replace(_,function(e){if("%%"===e)return"%";if(r>=s)return e;switch(e){case"%s":return n[r++]+"";case"%d":return+n[r++];case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),a=n[r];s>r;a=n[++r])o+=v(a)||!O(a)?" "+a:" "+i(a);return o},r.deprecate=function(e,i){function s(){if(!o){if(t.throwDeprecation)throw Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}if(b(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var o=!1;return s};var T,D={};r.debuglog=function(e){if(b(T)&&(T=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!D[e])if(RegExp("\\b"+e+"\\b","i").test(T)){var n=t.pid;D[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else D[e]=function(){};return D[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=g,r.isNull=v,r.isNullOrUndefined=y,r.isNumber=m,r.isString=w,r.isSymbol=x,r.isUndefined=b,r.isRegExp=k,r.isObject=O,r.isDate=A,r.isError=I,r.isFunction=C,r.isPrimitive=L,r.isBuffer=e("./support/isBuffer");var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",P(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!O(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":5,_process:4,inherits:2}],7:[function(e,t){"use strict";t.exports={addColorStop:e("./src/addColorStop"),arc:e("./src/arc"),arcTo:e("./src/arcTo"),beginPath:e("./src/beginPath"),bezierCurveTo:e("./src/bezierCurveTo"),Canvas:e("./src/Canvas"),clearRect:e("./src/clearRect"),clip:e("./src/clip"),clipPath:e("./src/clipPath"),closePath:e("./src/closePath"),createLinearGradient:e("./src/createLinearGradient"),createRadialGradient:e("./src/createRadialGradient"),drawCanvas:e("./src/drawCanvas"),drawImage:e("./src/drawImage"),ellipse:e("./src/ellipse"),fill:e("./src/fill"),fillArc:e("./src/fillArc"),fillRect:e("./src/fillRect"),fillStyle:e("./src/fillStyle"),globalAlpha:e("./src/globalAlpha"),globalCompositeOperation:e("./src/globalCompositeOperation"),Gradient:e("./src/Gradient"),hitRect:e("./src/hitRect"),hitRegion:e("./src/hitRegion"),Img:e("./src/Img"),Instruction:e("./src/Instruction"),isDataUrl:e("./src/isDataUrl"),isWorker:e("./src/isWorker"),lineStyle:e("./src/lineStyle"),lineTo:e("./src/lineTo"),moveTo:e("./src/moveTo"),path:e("./src/path"),quadraticCurveTo:e("./src/quadraticCurveTo"),Renderer:e("./src/Renderer"),rotate:e("./src/rotate"),scale:e("./src/scale"),shadowStyle:e("./src/shadowStyle"),stroke:e("./src/stroke"),strokeArc:e("./src/strokeArc"),strokeRect:e("./src/strokeRect"),text:e("./src/text"),textStyle:e("./src/textStyle"),transform:e("./src/transform"),transformPoints:e("./src/transformPoints"),translate:e("./src/translate")}},{"./src/Canvas":34,"./src/Gradient":35,"./src/Img":36,"./src/Instruction":37,"./src/Renderer":38,"./src/addColorStop":39,"./src/arc":40,"./src/arcTo":41,"./src/beginPath":42,"./src/bezierCurveTo":43,"./src/clearRect":44,"./src/clip":45,"./src/clipPath":46,"./src/closePath":47,"./src/createLinearGradient":48,"./src/createRadialGradient":49,"./src/drawCanvas":50,"./src/drawImage":51,"./src/ellipse":52,"./src/fill":53,"./src/fillArc":54,"./src/fillRect":55,"./src/fillStyle":56,"./src/globalAlpha":57,"./src/globalCompositeOperation":58,"./src/hitRect":59,"./src/hitRegion":60,"./src/isDataUrl":62,"./src/isWorker":63,"./src/lineStyle":64,"./src/lineTo":65,"./src/moveTo":66,"./src/path":67,"./src/quadraticCurveTo":68,"./src/rotate":69,"./src/scale":70,"./src/shadowStyle":71,"./src/stroke":72,"./src/strokeArc":73,"./src/strokeRect":74,"./src/text":75,"./src/textStyle":76,"./src/transform":77,"./src/transformPoints":78,"./src/translate":79}],8:[function(e,t,r){r=t.exports=function(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return o[e];var r=e+"",s=n[r.toLowerCase()];if(s)return s;var s=i[r.toLowerCase()];return s?s:1===r.length?r.charCodeAt(0):void 0};var n=r.code=r.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"right click":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=r.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:33,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */
for(s=97;123>s;s++)n[String.fromCharCode(s)]=s-32;for(var s=48;58>s;s++)n[s-48]=s;for(s=1;13>s;s++)n["f"+s]=s+111;for(s=0;10>s;s++)n["numpad "+s]=s+96;var o=r.names=r.title={};for(s in n)o[n[s]]=s;for(var a in i)n[a]=i[a]},{}],9:[function(e,t){function r(e,t,r){var s=e?e.length:0;return r&&i(e,t,r)&&(t=!1),s?n(e,t):[]}var n=e("../internal/baseFlatten"),i=e("../internal/isIterateeCall");t.exports=r},{"../internal/baseFlatten":11,"../internal/isIterateeCall":20}],10:[function(e,t){function r(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}t.exports=r},{}],11:[function(e,t){function r(e,t,c,u){u||(u=[]);for(var l=-1,h=e.length;++l<h;){var f=e[l];a(f)&&o(f)&&(c||s(f)||i(f))?t?r(f,t,c,u):n(u,f):c||(u[u.length]=f)}return u}var n=e("./arrayPush"),i=e("../lang/isArguments"),s=e("../lang/isArray"),o=e("./isArrayLike"),a=e("./isObjectLike");t.exports=r},{"../lang/isArguments":24,"../lang/isArray":25,"./arrayPush":10,"./isArrayLike":18,"./isObjectLike":22}],12:[function(e,t){var r=e("./createBaseFor"),n=r();t.exports=n},{"./createBaseFor":15}],13:[function(e,t){function r(e,t){return n(e,t,i)}var n=e("./baseFor"),i=e("../object/keysIn");t.exports=r},{"../object/keysIn":31,"./baseFor":12}],14:[function(e,t){function r(e){return function(t){return null==t?void 0:t[e]}}t.exports=r},{}],15:[function(e,t){function r(e){return function(t,r,i){for(var s=n(t),o=i(t),a=o.length,c=e?a:-1;e?c--:++c<a;){var u=o[c];if(r(s[u],u,s)===!1)break}return t}}var n=e("./toObject");t.exports=r},{"./toObject":23}],16:[function(e,t){var r=e("./baseProperty"),n=r("length");t.exports=n},{"./baseProperty":14}],17:[function(e,t){function r(e,t){var r=null==e?void 0:e[t];return n(r)?r:void 0}var n=e("../lang/isNative");t.exports=r},{"../lang/isNative":28}],18:[function(e,t){function r(e){return null!=e&&i(n(e))}var n=e("./getLength"),i=e("./isLength");t.exports=r},{"./getLength":16,"./isLength":21}],19:[function(e,t){function r(e,t){return e="number"==typeof e||n.test(e)?+e:-1,t=null==t?i:t,e>-1&&e%1==0&&t>e}var n=/^\d+$/,i=9007199254740991;t.exports=r},{}],20:[function(e,t){function r(e,t,r){if(!s(r))return!1;var o=typeof t;if("number"==o?n(r)&&i(t,r.length):"string"==o&&t in r){var a=r[t];return e===e?e===a:a!==a}return!1}var n=e("./isArrayLike"),i=e("./isIndex"),s=e("../lang/isObject");t.exports=r},{"../lang/isObject":29,"./isArrayLike":18,"./isIndex":19}],21:[function(e,t){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&n>=e}var n=9007199254740991;t.exports=r},{}],22:[function(e,t){function r(e){return!!e&&"object"==typeof e}t.exports=r},{}],23:[function(e,t){function r(e){return n(e)?e:Object(e)}var n=e("../lang/isObject");t.exports=r},{"../lang/isObject":29}],24:[function(e,t){function r(e){return i(e)&&n(e)&&o.call(e,"callee")&&!a.call(e,"callee")}var n=e("../internal/isArrayLike"),i=e("../internal/isObjectLike"),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable;t.exports=r},{"../internal/isArrayLike":18,"../internal/isObjectLike":22}],25:[function(e,t){var r=e("../internal/getNative"),n=e("../internal/isLength"),i=e("../internal/isObjectLike"),s="[object Array]",o=Object.prototype,a=o.toString,c=r(Array,"isArray"),u=c||function(e){return i(e)&&n(e.length)&&a.call(e)==s};t.exports=u},{"../internal/getNative":17,"../internal/isLength":21,"../internal/isObjectLike":22}],26:[function(e,t){function r(e){return!!e&&1===e.nodeType&&n(e)&&!i(e)}var n=e("../internal/isObjectLike"),i=e("./isPlainObject");t.exports=r},{"../internal/isObjectLike":22,"./isPlainObject":30}],27:[function(e,t){function r(e){return n(e)&&o.call(e)==i}var n=e("./isObject"),i="[object Function]",s=Object.prototype,o=s.toString;t.exports=r},{"./isObject":29}],28:[function(e,t){function r(e){return null==e?!1:n(e)?u.test(a.call(e)):i(e)&&s.test(e)}var n=e("./isFunction"),i=e("../internal/isObjectLike"),s=/^\[object .+?Constructor\]$/,o=Object.prototype,a=Function.prototype.toString,c=o.hasOwnProperty,u=RegExp("^"+a.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},{"../internal/isObjectLike":22,"./isFunction":27}],29:[function(e,t){function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=r},{}],30:[function(e,t){function r(e){var t;if(!s(e)||u.call(e)!=o||i(e)||!c.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return n(e,function(e,t){r=t}),void 0===r||c.call(e,r)}var n=e("../internal/baseForIn"),i=e("./isArguments"),s=e("../internal/isObjectLike"),o="[object Object]",a=Object.prototype,c=a.hasOwnProperty,u=a.toString;t.exports=r},{"../internal/baseForIn":13,"../internal/isObjectLike":22,"./isArguments":24}],31:[function(e,t){function r(e){if(null==e)return[];a(e)||(e=Object(e));var t=e.length;t=t&&o(t)&&(i(e)||n(e))&&t||0;for(var r=e.constructor,c=-1,l="function"==typeof r&&r.prototype===e,h=Array(t),f=t>0;++c<t;)h[c]=c+"";for(var p in e)f&&s(p,t)||"constructor"==p&&(l||!u.call(e,p))||h.push(p);return h}var n=e("../lang/isArguments"),i=e("../lang/isArray"),s=e("../internal/isIndex"),o=e("../internal/isLength"),a=e("../lang/isObject"),c=Object.prototype,u=c.hasOwnProperty;t.exports=r},{"../internal/isIndex":19,"../internal/isLength":21,"../lang/isArguments":24,"../lang/isArray":25,"../lang/isObject":29}],32:[function(e,t){t.exports=function(e,t){for(var r=e[0],n=e[1],i=!1,s=0,o=t.length-1;s<t.length;o=s++){var a=t[s][0],c=t[s][1],u=t[o][0],l=t[o][1],h=c>n!=l>n&&(u-a)*(n-c)/(l-c)+a>r;h&&(i=!i)}return i}},{}],33:[function(e,t){"use strict";var r=(t.exports=function(e,t,i){switch(i&&i.toLowerCase()){case"strassen":return n(e,t);case"naive":default:return r(e,t)}},function(e,t){for(var r=e.length,n=[],i=0;r>i;i++)n.push([]);for(var s=0;r>s;s++)for(var o=0;r>o;o++){n[s][o]=0;for(var a=0;r>a;a++)n[s][o]=n[s][o]+e[s][a]*t[a][o]}return n}),n=function i(e,t){for(var r=e.length,n=[],s=0;r>s;s++)n.push([]);if(1==r)n[0][0]=e[0][0]*t[0][0];else{var o=r/2,a=[],c=[],u=[],l=[],h=[],f=[],p=[],d=[];for(s=0;o>s;s++)a.push([]),c.push([]),u.push([]),l.push([]),h.push([]),f.push([]),p.push([]),d.push([]);var g,v;for(g=0;o>g;g++){for(v=0;o>v;v++)a[g][v]=e[g][v],h[g][v]=t[g][v];for(v=o;r>v;v++)c[g][v-o]=e[g][v],f[g][v-o]=t[g][v]}for(g=o;r>g;g++){for(v=0;o>v;v++)u[g-o][v]=e[g][v],p[g-o][v]=t[g][v];for(v=o;r>v;v++)l[g-o][v-o]=e[g][v],d[g-o][v-o]=t[g][v]}var y=[],m=[],w=[],x=[],b=[],k=[],O=[],A=[],I=[],C=[];for(s=0;o>s;s++)y.push([]),m.push([]),w.push([]),x.push([]),b.push([]),k.push([]),O.push([]),A.push([]),I.push([]),C.push([]);for(g=0;o>g;g++)for(v=0;o>v;v++)y[g][v]=f[g][v]-d[g][v],m[g][v]=a[g][v]+c[g][v],w[g][v]=u[g][v]+l[g][v],x[g][v]=p[g][v]-h[g][v],b[g][v]=a[g][v]+l[g][v],k[g][v]=h[g][v]+d[g][v],O[g][v]=c[g][v]-l[g][v],A[g][v]=p[g][v]+d[g][v],I[g][v]=a[g][v]-u[g][v],C[g][v]=h[g][v]+f[g][v];var L=i(a,y),j=i(m,d),S=i(w,h),P=i(l,x),R=i(b,k),_=i(O,A),T=i(I,C);for(g=0;o>g;g++)for(v=0;o>v;v++)n[g][v]=R[g][v]+P[g][v]-j[g][v]+_[g][v],n[g][v+o]=L[g][v]+j[g][v],n[g+o][v]=S[g][v]+P[g][v],n[g+o][v+o]=R[g][v]+L[g][v]-S[g][v]-T[g][v]}return n}},{}],34:[function(e,t){"use strict";function r(t,r,i){this.id=i||o();var s=e("./Renderer");this.renderer=n?null:new s(t,r,document.createElement("div")),this.width=t,this.height=r,Object.seal(this)}var n=e("./isWorker"),i=e("./Img"),s=e("lodash/array/flatten"),o=e("./id");r.prototype.render=function(e){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);t=s(t),n?postMessage({type:"canvas",value:{id:this.id,width:this.width,height:this.height,children:t}}):this.renderer.render(e)},r.prototype.toImage=function(e){e=e||o();var t;return n?(postMessage({type:"canvas-image",value:{id:this.id,imageID:e}}),t=new i,t.id=e,t):(t=new Image,t.src=this.renderer.canvas.toDataURL("image/png"),void(i.cache[e]=t))},r.prototype.dispose=function(){if(n)return postMessage({type:"canvas-dispose",value:{id:this.id}});r.cache[this.id]=null;var e=r.cachable.indexOf(this.id);e>-1&&r.cachable.splice(e,1)},r.prototype.cache=function(){if(n)return postMessage({type:"canvas-cache",value:{id:this.id}});var e=r.cachable.indexOf(this.id);return-1===e&&r.cachable.push(this.id),this},r.cleanUp=function(){for(var e,t={},n=0;n<r.cachable.length;n++)e=r.cachable[n],t[e]=r.cache[e];r.cache=t},r.prototype.resize=function(e,t){return this.renderer.resize(e,t)},r.cache={},r.cachable=[],r.create=function(e,t,n){return new r(e,t,n)},Object.seal(r),Object.seal(r.prototype),t.exports=r},{"./Img":36,"./Renderer":38,"./id":61,"./isWorker":63,"lodash/array/flatten":9}],35:[function(e,t){"use strict";function r(e,t){this.id=e,this.grd=t,r.cache[e]=this,Object.seal(this)}var n=e("./isWorker");r.cache={},r.cachable=[],r.prototype.cache=function(){return n?postMessage({type:"gradient-cache",value:{id:this.id}}):r.cachable.push(this.id),this},r.prototype.dispose=function(){if(n)return postMessage({type:"gradient-dispose",value:{id:this.id}});r.cache[this.id]=null;var e=r.cachable.indexOf(this.id);-1!==e&&r.cachable.splice(e,1)},r.cleanUp=function(){for(var e,t={},n=0;n<r.cachable.length;n++)e=r.cachable[n],t[e]=r.cache[e];r.cache=t},Object.seal(r),Object.seal(r.prototype),t.exports=r},{"./isWorker":63}],36:[function(e,t){"use strict";function r(e){this._src="",this.isDataUrl=!1,this.id=e||o(),this.buffer=new ArrayBuffer,this.onload=function(){},this.texture=null,this.type="image",this.blobOptions={},Object.seal(this)}var n=e("path"),i=e("./isWorker"),s=e("./isDataUrl"),o=e("./id");r.cache={},r.cachable=[],Object.defineProperty(r.prototype,"src",{set:function(e){if("undefined"==typeof window){var t=this;if(this._src=e,this.isDataUrl=s(e),this.isDataUrl)this.id=""+Date.now(),this.makeDataUrl();else{this.id=e;var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){t.buffer=this.response,t.blobOptions={type:"image/"+n.extname(t._src).slice(1)},t.generateTexture(this.response,t.blobOptions)},r.send()}}},get:function(){return this._src}}),r.prototype.generateTexture=function(e,t){var r,n={type:"image",value:{buffer:e,opts:t,id:this.id}};i?postMessage(n,[e]):(r=new Image,r.src=(window.URL||window.webkitURL).createObjectURL(new Blob([e],t))),this.onload()},r.prototype.cache=function(){return i?postMessage({type:"image-cache",value:{id:this.id}}):(Image.cachable.push(this.id),this)},r.prototype.dispose=function(){if(i)return postMessage({type:"image-dispose",value:{id:this.id}});Image.cache[this.id]=null;var e=Image.cachable.indexOf(this.id);-1!==e&&Image.cachable.splice(e,1)},r.cleanUp=function(){for(var e,t={},n=0;n<r.cachable.length;n++)e=r.cachable[n],t[e]=r.cache[e];r.cache=t},Object.seal(r),Object.seal(r.prototype),t.exports=r},{"./id":61,"./isDataUrl":62,"./isWorker":63,path:3}],37:[function(e,t){"use strict";function r(e,t){this.type=e,this.props=t,Object.seal(this)}Object.seal(r),Object.seal(r.prototype),t.exports=r},{}],38:[function(e,t){"use strict";function r(t,r,n,c){return l.EventEmitter.call(this),s||(s=e("./Canvas")),o||(o=e("./Gradient")),f||(o=e("./Gradient")),this.fireFrameTimeout=16,this.frameTimes=[16,16,16,16,16,16,16,16,16,16],this.startFrame=0,this.endFrame=0,this.tree=null,this.isReady=!1,this.mouseState="down",this.mouseData={x:0,y:0,state:this.mouseState},this.mouseRegions=[],this.activeRegions=[],this.keyData={},a?(this.worker=null,this.canvas=null,this.ctx=null,this.parent=null,addEventListener("message",this.browserCommand.bind(this)),void Object.seal(this)):(c?(this.worker=c instanceof Worker?c:new Worker(c),this.worker.onmessage=this.workerCommand.bind(this)):this.worker=null,n&&i(n)?this.parent=n:(this.parent=document.createElement("div"),this.parent.style.margin="0 auto",this.parent.style.width=t+"px",this.parent.style.height=r+"px",document.body.appendChild(this.parent)),t&&t>0||(t=window.innerWidth),r&&r>0||(r=window.innerHeight),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=r,this.parent.appendChild(this.canvas),this.hookMouseEvents(),this.hookKeyboardEvents(),void Object.seal(this))}var n=e("lodash/array/flatten"),i=e("lodash/lang/isElement"),s=null,o=null,a=e("./isWorker"),c=e("./createLinearGradient"),u=e("./createRadialGradient"),l=e("events"),h=e("util"),f=e("./Img"),p=e("keycode"),d=e("square-matrix-multiply"),g=e("./transformPoints"),v=e("point-in-polygon"),y=2*Math.PI,m=[[1,0,0],[0,1,0],[0,0,1]];h.inherits(r,l.EventEmitter),r.prototype.render=function(){var e,t,r,i,c,u,l,h,p,v=[],w=[],x=[],b=[],k=[],O=[m],A=[],I=this.ctx,C=[];for(e=0,t=arguments.length;t>e;e++)C.push(arguments[e]);if(C=n(C,!0),a)return this.sendBrowser("render",C);for(this.mouseRegions=[],this.activeRegions=[],e=0,t=C.length;t>e;e++)if(r=C[e])if(i=r.props,c=r.type,"transform"!==c)if("scale"!==c)if("translate"!==c)if("rotate"!==c)if("restore"!==c)if("fillRect"!==c)if("strokeRect"!==c)if("clearRect"!==c)if("fillStyle"!==c)if("fillGradient"!=c)if("endFillStyle"!==c)if("lineStyle"!==c)if("endLineStyle"!==c)if("textStyle"!==c)if("endTextStyle"!==c)if("shadowStyle"!==c)if("endShadowStyle"!==c)if("text"!==c)if("drawImage"!==c)if("drawImageSize"!==c)if("drawImageSource"!==c)if("drawCanvas"!==c)if("drawCanvasSize"!==c)if("drawCanvasSource"!==c)"strokeArc"!==c?"strokeArc-counterclockwise"!==c?"fillArc"!==c&&"fillArc-counterclockwise"!==c?"moveTo"!==c?"lineTo"!==c?"bezierCurveTo"!==c?"quadraticCurveTo"!==c?"anticlockwise-arc"!==c?"arc"!==c?"full-arc"!==c?"quick-arc"!==c?"arcTo"!==c?"anticlockwise-ellipse"!==c?"ellipse"!==c?"full-ellipse"!==c?"quick-ellipse"!==c?"globalCompositeOperation"!==c?"endGlobalCompositeOperation"!==c?"fill"!==c?"stroke"!==c?"beginPath"!==c?"closePath"!==c?"globalAlpha"!==c?"endGlobalAlpha"!==c?"hitRegion"!==c||this.mouseRegions.push({id:i.id,points:g(i.points,O[O.length-1])}):I.globalAlpha=k.pop():(k.push(I.globalAlpha),I.globalAlpha*=i.value):I.closePath():I.beginPath():I.stroke():I.fill():I.globalCompositeOperation=A.pop():(A.push(I.globalCompositeOperation),I.globalCompositeOperation=i.value):(this.save(),this.translate(i.x,i.y),this.scale(i.radiusX,i.radiusY),this.arc(0,0,1,0,y),this.restore()):(this.save(),this.translate(i.x,i.y),this.rotate(i.rotation),this.scale(i.radiusX,i.radiusY),this.arc(0,0,1,0,y),this.restore()):(this.save(),this.translate(i.x,i.y),this.rotate(i.rotation),this.scale(i.radiusX,i.radiusY),this.arc(0,0,1,i.startAngle,i.endAngle),this.restore()):(this.save(),this.translate(i.x,i.y),this.rotate(i.rotation),this.scale(i.radiusX,i.radiusY),this.arc(0,0,1,i.startAngle,i.endAngle,!0),this.restore()):I.arcTo(i.x1,i.y1,i.x2,i.y2,i.r):I.arc(0,0,i.r,0,y):I.arc(i.x,i.y,i.r,0,y):I.arc(i.x,i.y,i.r,i.startAngle,i.endAngle):I.arc(i.x,i.y,i.r,i.startAngle,i.endAngle,!0):I.quadraticCurveTo(i.cpx,i.cpy,i.x,i.y):I.bezierCurveTo(i.cp1x,i.cp1y,i.cp2x,i.cp2y,i.x,i.y):I.lineTo(i.x,i.y):I.moveTo(i.x,i.y):(I.beginPath(),I.arc(i.x,i.y,i.r,i.startAngle,i.endAngle),I.closePath(),I.fill()):(I.beginPath(),I.arc(i.x,i.y,i.r,i.startAngle,i.endAngle,!0),I.closePath(),I.stroke()):(I.beginPath(),I.arc(i.x,i.y,i.r,i.startAngle,i.endAngle),I.closePath(),I.stroke());else{if(!s.cache.hasOwnProperty(i.img))continue;I.drawImage(s.cache[i.img].renderer.canvas,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}else{if(!s.cache.hasOwnProperty(i.img))continue;I.drawImage(s.cache[i.img].renderer.canvas,i.dx,i.dy,i.dWidth,i.dHeight)}else{if(!s.cache.hasOwnProperty(i.img))continue;I.drawImage(s.cache[i.img].renderer.canvas,i.dx,i.dy)}else{if(!f.cache.hasOwnProperty(i.img))continue;I.drawImage(f.cache[i.img],i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}else{if(!f.cache.hasOwnProperty(i.img))continue;I.drawImage(f.cache[i.img],i.dx,i.dy,i.dWidth,i.dHeight)}else{if(!f.cache.hasOwnProperty(i.img))continue;I.drawImage(f.cache[i.img],i.dx,i.dy)}else{if(0!==i.maxWidth){i.fill&&I.fillText(i.text,i.x,i.y,i.maxWidth),i.stroke&&I.strokeText(i.text,i.x,i.y,i.maxWidth);continue}i.fill&&I.fillText(i.text,i.x,i.y),i.stroke&&I.strokeText(i.text,i.x,i.y)}else u=b.pop(),I.shadowBlur=u.shadowBlur,I.shadowColor=u.shadowColor,I.shadowOffsetX=u.shadowOffsetX,I.shadowOffsetY=u.shadowOffsetY;else b.push({shadowBlur:I.shadowBlur,shadowColor:I.shadowColor,shadowOffsetX:I.shadowOffsetX,shadowOffsetY:I.shadowOffsetY}),null!==i.shadowBlur&&(I.shadowBlur=i.shadowBlur),null!==i.shadowColor&&(I.shadowColor=i.shadowColor),null!==i.shadowOffsetX&&(I.shadowOffsetX=i.shadowOffsetX),null!==i.shadowOffsetY&&(I.shadowOffsetY=i.shadowOffsetY);else u=x.pop(),I.font=u.font,I.textAlign=u.textAlign,I.textBaseline=u.textBaseline,I.direction=u.direction;else x.push({font:I.font,textAlign:I.textAlign,textBaseline:I.textBaseline,direction:I.direction}),null!==i.font&&(I.font=i.font),null!==i.textAlign&&(I.textAlign=i.textAlign),null!==i.textBaseline&&(I.textBaseline=i.textBaseline),null!==i.lineJoin&&(I.direction=i.direction);else u=w.pop(),I.strokeStyle=u.strokeStyle,I.lineWidth=u.lineWidth,I.lineCap=u.lineCap,I.lineJoin=u.lineJoin,I.miterLimit=u.miterLimit,I.setLineDash(u.lineDash),I.lineDashOffset=u.lineDashOffset;else w.push({strokeStyle:I.strokeStyle,lineWidth:I.lineWidth,lineCap:I.lineCap,lineJoin:I.lineJoin,miterLimit:I.miterLimit,lineDash:I.getLineDash(),lineDashOffset:I.lineDashOffset}),null!==i.strokeStyle&&(I.strokeStyle=i.strokeStyle),null!==i.lineWidth&&(I.lineWidth=i.lineWidth),null!==i.lineCap&&(I.lineCap=i.lineCap),null!==i.lineJoin&&(I.lineJoin=i.lineJoin),null!==i.miterLimit&&(I.miterLimit=i.miterLimit),i.lineDash.length>0&&I.setLineDash(i.lineDash),null!==i.lineDashOffset&&(I.lineDashOffset=i.lineDashOffset);else I.fillStyle=v.pop();else v.push(I.fillStyle),o.cache.hasOwnProperty(i.value.id)&&(I.fillStyle=o.cache[i.value.id].grd);else v.push(I.fillStyle),I.fillStyle=i.value;else I.clearRect(i.x,i.y,i.width,i.height);else I.strokeRect(i.x,i.y,i.width,i.height);else I.fillRect(i.x,i.y,i.width,i.height);else O.pop(),I.restore();else p=Math.cos(i.r),h=Math.cos(i.r),l=d(O[O.length-1],[[p,-h,0],[h,p,0],[0,0,1]]),u={a:l[0][0],b:l[1][0],c:l[0][1],d:l[1][1],e:l[0][2],f:l[1][2]},O.push(l),I.save(),I.rotate(i.r);else l=d(O[O.length-1],[[1,0,i.x],[0,1,i.y],[0,0,1]]),u={a:l[0][0],b:l[1][0],c:l[0][1],d:l[1][1],e:l[0][2],f:l[1][2]},O.push(l),I.save(),I.translate(i.x,i.y);else l=d(O[O.length-1],[[i.x,0,0],[0,i.y,0],[0,0,1]]),u={a:l[0][0],b:l[1][0],c:l[0][1],d:l[1][1],e:l[0][2],f:l[1][2]},O.push(l),I.save(),I.scale(i.x,i.y);else l=d(O[O.length-1],[[i.a,i.c,i.e],[i.b,i.d,i.f],[0,0,1]]),u={a:l[0][0],b:l[1][0],c:l[0][1],d:l[1][1],e:l[0][2],f:l[1][2]},O.push(l),I.save(),I.transform(i.a,i.b,i.c,i.d,i.e,i.f)},r.create=function(e,t,n,i){return arguments.length>2?new r(e,t,n,i):2===arguments.length?new r(e,t):new r},r.prototype.workerCommand=function(t){var r,n=t.data;if(s||(s=e("./Canvas")),o||(o=e("./Gradient")),"ready"===n.type)return this.ready();if("image"===n.type)return r=new f(n.value.id),f.cache[n.value.id]=r,r.generateTexture(n.value.buffer,n.value.opts);if("image-cache"===n.type)return void(f.cache.hasOwnProperty(n.value.id)&&f.cache[n.value.id].cache());if("image-dispose"===n.type)return void(f.cache.hasOwnProperty(n.value.id)&&f.cache[n.value.id].dispose());if("render"===n.type){if(this.endFrame=Date.now(),this.tree=n.value,r=this.endFrame-this.startFrame,r>=500)return;return r=14-r,0>r&&(r=0),void(r<this.fireFrameTimeout?(this.fireFrameTimeout=r,this.frameTimes.splice(0,this.frameTimes.length)):(this.frameTimes.push(r),this.frameTimes.length<10||(this.fireFrameTimeout=Math.min.apply(Math,this.frameTimes),this.frameTimes.shift())))}if("renderer-resize"===n.type)return this.resize(n.value.width,n.value.height);if("canvas"===n.type)return s.cache.hasOwnProperty(n.value.id)||(s.cache[n.value.id]=new s(n.value.width,n.value.height,n.value.id)),r=s.cache[n.value.id],r.resize(n.value.width,n.value.height),s.cache[n.value.id].render(n.value.children);if("canvas-image"===n.type&&s.cache.hasOwnProperty(n.value.id))return void s.cache[n.value.id].toImage(n.value.imageID);if("canvas-cache"===n.type)return void(s.cache.hasOwnProperty(n.value.id)&&s.cache[n.value.id]&&s.cache[n.value.id].cache());if("canvas-dispose"===n.type&&s.cache.hasOwnProperty(n.value.id)&&s.cache[n.value.id])return s.cache[n.value.id].dispose();if("linear-gradient"===n.type)return void(o.cache[n.value.id]=c(n.value.x0,n.value.y0,n.value.x1,n.value.y1,n.value.children,n.value.id));if("radial-gradient"===n.type)return void(o.cache[n.value.id]=u(n.value.x0,n.value.y0,n.value.r0,n.value.x1,n.value.y1,n.value.r1,n.value.children,n.value.id));if("gradient-dispose"!==n.type){if("gradient-cache"!==n.type)return"style"===n.type?this.style(n.value):this.emit(n.type,n.value);if(o.cache.hasOwnProperty(n.value.id))return o.cachable.push(n.value.id)}else if(o.cache.hasOwnProperty(n.value.id))return o.cache[n.value.id].dispose()},r.prototype.resize=function(e,t){return a?this.sendBrowser("renderer-resize",{width:e,height:t}):(""+this.canvas.width!=""+e&&(this.canvas.width=e),void(""+this.canvas.height!=""+t&&(this.canvas.height=t)))},r.prototype.hookRender=function(){var e=!0;return this.isReady&&(this.worker?null!==this.tree?(this.render(this.tree),this.tree=null,setTimeout(this.fireFrame.bind(this),this.fireFrameTimeout)):e=!1:this.fireFrame(),e&&setTimeout(this.cleanUpCache.bind(this),0)),requestAnimationFrame(this.hookRender.bind(this))},r.prototype.cleanUpCache=function(){return f.cleanUp(),s.cleanUp(),o.cleanUp()},r.prototype.sendWorker=function(e,t){return this.worker?this.worker.postMessage({type:e,value:t}):this.emit(e,t)},r.prototype.sendBrowser=function(e,t){return postMessage({type:e,value:t})},r.prototype.sendAll=function(e,t){return a?this.sendBrowser(e,t):this.sendWorker(e,t),this.emit(e,t)},r.prototype.hookMouseEvents=function(){return document.addEventListener("mousemove",this.mouseMove.bind(this)),this.canvas.addEventListener("mousedown",this.mouseDown.bind(this)),document.addEventListener("mouseup",this.mouseUp.bind(this))},r.prototype.mouseMove=function(e){var t,r=this.canvas.getBoundingClientRect(),n=[0,0];n[0]=e.clientX-r.left,n[1]=e.clientY-r.top;for(var i=0;i<this.mouseRegions.length;i++)t=this.mouseRegions[i],v(n,t.points)&&(this.activeRegions.push(t.id),this.mouseRegions.splice(this.mouseRegions.indexOf(t),1),i-=1);return this.mouseData={x:n[0],y:n[1],state:this.mouseState,activeRegions:this.activeRegions},this.sendWorker("mouse",this.mouseData),e.preventDefault(),!1},r.prototype.mouseDown=function(e){return this.mouseState="down",this.mouseMove(e)},r.prototype.mouseUp=function(e){return this.mouseState="up",this.mouseMove(e)},r.prototype.hookKeyboardEvents=function(){for(var e in p.code)p.code.hasOwnProperty(e)&&(this.keyData[e]="up");return this.canvas.addEventListener("keydown",this.keyDown.bind(this)),document.addEventListener("keyUp",this.keyUp.bind(this))},r.prototype.keyChange=function(e){return this.sendWorker("key",this.keyData),e.preventDefault(),!1},r.prototype.keyDown=function(e){return this.keyData[p.code[e.keyCode]]="down",this.keyChange(e)},r.prototype.keyUp=function(e){return this.keyData[p.code[e.keyCode]]="up",this.keyChange(e)},r.prototype.browserCommand=function(e){return this.emit(e.data.type,e.data.value)},r.prototype.fireFrame=function(){return this.startFrame=Date.now(),this.sendWorker("frame",{})},r.prototype.style=function(){for(var e,t,r,i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);if(i=n(i),a)this.sendBrowser("style",i);else for(s=0;s<i.length;s++){e=i[s];for(t in e)if(e.hasOwnProperty(t)){if(r=e[t],null===r){this.canvas.style.removeProperty(t);continue}this.canvas.style.setProperty(t,r)}}},r.prototype.ready=function(){return a?void this.sendBrowser("ready"):(this.isReady=!0,this.fireFrame(),requestAnimationFrame(this.hookRender.bind(this)))},Object.seal(r),Object.seal(r.prototype),t.exports=r},{"./Canvas":34,"./Gradient":35,"./Img":36,"./createLinearGradient":48,"./createRadialGradient":49,"./isWorker":63,"./transformPoints":78,events:1,keycode:8,"lodash/array/flatten":9,"lodash/lang/isElement":26,"point-in-polygon":32,"square-matrix-multiply":33,util:6}],39:[function(e,t){"use strict";function r(e,t){return new n("addColorStop",{offset:e,color:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],40:[function(e,t){"use strict";function r(e,t,r,i,s,o){return arguments.length>5?new n(o?"anticlockwise-arc":"arc",{x:e,y:t,r:r,startAngle:i,endAngle:s}):5===arguments.length?new n("arc",{x:e,y:t,r:r,startAngle:i,endAngle:s}):arguments.length<3?arguments.length<1?new n("quick-arc",{r:1}):new n("quick-arc",{r:e}):new n("full-arc",{x:e,y:t,r:r})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],41:[function(e,t){"use strict";function r(e,t,r,i,s){return new n("arcTo",{x1:e,y1:t,x2:r,y2:i,r:s})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],42:[function(e,t){"use strict";function r(){return new n("beginPath")}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],43:[function(e,t){"use strict";function r(e,t,r,i,s,o){return new n("bezierCurveTo",{cp1x:e,cp1y:t,cp2x:r,cp2y:i,x:s,y:o})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],44:[function(e,t){"use strict";function r(e,t,r,i){return arguments.length>2?new n("clearRect",{x:e,y:t,width:r,height:i}):new n("clearRect",{x:0,y:0,width:e,height:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],45:[function(e,t){"use strict";function r(){for(var e=[n()],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.push(i()),e}var n=e("./beginPath"),i=e("./clipPath");t.exports=r},{"./beginPath":42,"./clipPath":46}],46:[function(e,t){"use strict";function r(){return new n("clipPath")}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],47:[function(e,t){"use strict";function r(){return new n("closePath")}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],48:[function(e,t){"use strict";function r(e,t,r,o,a,c){if(c=c||s(),n)return postMessage({type:"linear-gradient",value:{id:c,x0:e,y0:t,x1:r,y1:o,children:a}}),new i(c,null);for(var u,l=document.createElement("canvas").getContext("2d"),h=l.createLinearGradient(e,t,r,o),f=new i(c,h),p=0;p<a.length;p++)u=a[p],h.addColorStop(u.props.offset,u.props.color);return f}var n=e("./isWorker"),i=(e("lodash/array/flatten"),e("./Gradient")),s=e("./id");t.exports=r},{"./Gradient":35,"./id":61,"./isWorker":63,"lodash/array/flatten":9}],49:[function(e,t){"use strict";function r(e,t,r,o,a,c,u,l){if(l=l||s(),n)return postMessage({type:"radial-gradient",value:{id:l,x0:e,r0:r,y0:t,x1:o,y1:a,r1:c,children:u}}),new i(l,null);for(var h,f=document.createElement("canvas").getContext("2d"),p=f.createRadialGradient(e,t,r,o,a,c),d=new i(l,p),g=0;g<u.length;g++)h=u[g],p.addColorStop(h.props.offset,h.props.color);return d}var n=e("./isWorker"),i=e("./Gradient"),s=e("./id");t.exports=r},{"./Gradient":35,"./id":61,"./isWorker":63}],50:[function(e,t){"use strict";function r(e,t,r,i,s,o,a,c,u){return 9===arguments.length?new n("drawCanvasSource",{img:e.id,sx:t,sy:r,sWidth:i,sHeight:s,dx:o,dy:a,dWidth:c,dHeight:u}):arguments.length<5?arguments.length<3?new n("drawCanvas",{img:e.id,dx:0,dy:0}):new n("drawCanvas",{img:e.id,dx:t,dy:r}):new n("drawCanvasSize",{img:e.id,dx:t,dy:r,dWidth:i,dHeight:s})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],51:[function(e,t){"use strict";function r(e,t,r,i,s,o,a,c,u){return 9===arguments.length?new n("drawImageSource",{img:e.id,sx:t,sy:r,sWidth:i,sHeight:s,dx:o,dy:a,dWidth:c,dHeight:u}):arguments.length<5?arguments.length<3?new n("drawImage",{img:e.id,dx:0,dy:0}):new n("drawImage",{img:e.id,dx:t,dy:r}):new n("drawImageSize",{img:e.id,dx:t,dy:r,dWidth:i,dHeight:s})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],52:[function(e,t){"use strict";function r(e,t,r,i,s,o,a,c){return arguments.length>7?new n(c?"anticlockwise-ellipse":"ellipse",{x:e,y:t,radiusX:r,radiusY:i,startAngle:o,endAngle:a}):7===arguments.length?new n("ellipse",{x:e,y:t,radiusX:r,radiusY:i,rotation:s,startAngle:o,endAngle:a}):arguments.length<5?4===arguments.length?new n("quick-ellipse",{x:e,y:t,radiusX:r,radiusY:i}):new n("quick-ellipse",{x:0,y:0,radiusX:e,radiusY:t}):new n("full-ellipse",{x:e,y:t,radiusX:r,radiusY:i,rotation:s})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],53:[function(e,t){"use strict";function r(){return new n("fill")}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],54:[function(e,t){"use strict";function r(e,t,r,s,o,a){return arguments.length>=6&&a?new n("fillArc-counterclockwise",{x:e,y:t,r:r,startAngle:s,endAngle:o}):arguments.length>3?new n("fillArc",{x:e,y:t,r:r,startAngle:s,endAngle:o}):arguments.length>1?new n("fillArc",{x:e,y:t,r:r,startAngle:0,endAngle:i}):new n("fillArc",{x:0,y:0,r:e,startAngle:0,endAngle:i})}var n=e("./Instruction"),i=2*Math.PI;t.exports=r},{"./Instruction":37}],55:[function(e,t){"use strict";function r(e,t,r,i){return arguments.length<4?new n("fillRect",{x:0,y:0,width:e,height:t}):new n("fillRect",{x:e,y:t,width:r,height:i})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],56:[function(e,t){"use strict";function r(e){var t;e instanceof i&&(t=new n("fillGradient",{value:{id:e.id}})),t||(t=new n("fillStyle",{value:e}));for(var r=[t],s=1;s<arguments.length;s++)r.push(arguments[s]);return r.push(new n("endFillStyle")),r}var n=e("./Instruction"),i=e("./Gradient");t.exports=r},{"./Gradient":35,"./Instruction":37}],57:[function(e,t){"use strict";function r(e){for(var t=[new n("globalAlpha",{value:e})],r=1;r<arguments.length;r++)t.push(arguments[r]);return t.push(new n("endGlobalAlpha")),t}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],58:[function(e,t){"use strict";function r(e){var t=[new n("globalCompositeOperation",{value:e})];if(0===arguments.length)return[];for(var r=1;r<arguments.length;r++)t.push(arguments[r]);return t.push(new n("endGlobalCompositeOperation")),t}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],59:[function(e,t){"use strict";function r(e,t,r,i,s){arguments.length>3||(i=t,s=r,t=0,r=0);var o=[[t,r],[t,r+s],[t+i,r+s],[t+i,r]];return n(e,o)}var n=(e("./Instruction"),e("./hitRegion"));t.exports=r},{"./Instruction":37,"./hitRegion":60}],60:[function(e,t){"use strict";function r(e,t){return new n("hitRegion",{id:e,points:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],61:[function(e,t){"use strict";function r(){return Date.now()+"-"+Math.random()}t.exports=r},{}],62:[function(e,t){function r(e){return!!e.match(r.regex)}r.regex=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i,Object.seal(r),t.exports=r},{}],63:[function(e,t){"use strict";t.exports="undefined"==typeof document},{}],64:[function(e,t){"use strict";function r(e){e=e||{};var t={strokeStyle:null,lineWidth:null,lineCap:null,lineJoin:null,miterLimit:null,lineDash:[],lineDashOffset:null};void 0!==e.strokeStyle&&(t.strokeStyle=e.strokeStyle),void 0!==e.lineWidth&&(t.lineWidth=e.lineWidth),void 0!==e.lineCap&&(t.lineCap=e.lineCap),void 0!==e.lineJoin&&(t.lineJoin=e.lineJoin),void 0!==e.miterLimit&&(t.miterLimit=e.miterLimit),void 0!==e.lineDash&&(t.lineDash=e.lineDash),void 0!==e.lineDashOffset&&(t.lineDashOffset=e.lineDashOffset);for(var r=[new n("lineStyle",t)],i=1;i<arguments.length;i++)r.push(arguments[i]);return r.push(new n("endLineStyle")),r}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],65:[function(e,t){"use strict";function r(e,t){return 0===arguments.length?new n("lineTo",{x:0,y:0}):new n("lineTo",{x:e,y:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],66:[function(e,t){"use strict";function r(e,t){return 0===arguments.length?new n("moveTo",{x:0,y:0}):new n("moveTo",{x:e,y:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],67:[function(e,t){"use strict";function r(){for(var e=[n()],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.push(i()),e}var n=e("./beginPath"),i=e("./closePath");t.exports=r},{"./beginPath":42,"./closePath":47}],68:[function(e,t){"use strict";function r(e,t,r,i){return new n("quadraticCurveTo",{cpx:e,cpy:t,x:r,y:i})
}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],69:[function(e,t){"use strict";function r(e){e=+e;for(var t=[new n("rotate",{r:e})],r=1;r<arguments.length;r++)t.push(arguments[r]);return t.push(new n("restore")),t}{var n=e("./Instruction");e("lodash/array/flatten")}t.exports=r},{"./Instruction":37,"lodash/array/flatten":9}],70:[function(e,t){"use strict";function r(e,t,r){var i=2;"number"!=typeof t&&(t=e,i=1),r=r||[];for(var s=[new n("scale",{x:e,y:t})];i<arguments.length;i++)s.push(arguments[i]);return s.push(new n("restore")),s}{var n=e("./Instruction");e("lodash/array/flatten")}t.exports=r},{"./Instruction":37,"lodash/array/flatten":9}],71:[function(e,t){"use strict";function r(e){e=e||{};var t={shadowBlur:null,shadowColor:null,shadowOffsetX:null,shadowOffsetY:null};void 0!==e.shadowBlur&&(t.shadowBlur=e.shadowBlur),void 0!==e.shadowColor&&(t.shadowColor=e.shadowColor),void 0!==e.shadowOffsetX&&(t.shadowOffsetX=e.shadowOffsetX),void 0!==e.direction&&(t.shadowOffsetY=e.shadowOffsetY);for(var r=[new n("shadowStyle",e)],i=1;i<arguments.length;i++)r.push(arguments[i]);return r.push(new n("endShadowStyle")),r}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],72:[function(e,t){"use strict";function r(){return new n("stroke")}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],73:[function(e,t){"use strict";function r(e,t,r,s,o,a){return arguments.length>=6&&a?new n("strokeArc-counterclockwise",{x:e,y:t,r:r,startAngle:s,endAngle:o}):arguments.length>3?new n("strokeArc",{x:e,y:t,r:r,startAngle:s,endAngle:o}):arguments.length>1?new n("strokeArc",{x:e,y:t,r:r,startAngle:0,endAngle:i}):new n("strokeArc",{x:0,y:0,r:e,startAngle:0,endAngle:i})}var n=e("./Instruction"),i=2*Math.PI;t.exports=r},{"./Instruction":37}],74:[function(e,t){"use strict";function r(e,t,r,i){return arguments.length>2?new n("strokeRect",{x:e,y:t,width:r,height:i}):new n("strokeRect",{x:0,y:0,width:e,height:t})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],75:[function(e,t){"use strict";function r(e,t,r,i,s,o){return 6===arguments.length?new n("text",{x:t,y:r,fill:i,stroke:s,text:e,maxWidth:o}):5===arguments.length?new n("text",{x:t,y:r,fill:i,stroke:s,text:e,maxWidth:0}):4===arguments.length?new n("text",{x:t,y:r,fill:i,stroke:!1,text:e,maxWidth:0}):3===arguments.length?new n("text",{x:t,y:r,fill:!0,stroke:!1,text:e,maxWidth:0}):new n("text",{x:0,y:0,fill:!0,stroke:!1,text:e,maxWidth:0})}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],76:[function(e,t){"use strict";function r(e){e=e||{};var t={font:null,textAlign:null,textBaseline:null,direction:null};void 0!==e.font&&(t.font=e.font),void 0!==e.textAlign&&(t.textAlign=e.textAlign),void 0!==e.textBaseline&&(t.textBaseline=e.textBaseline),void 0!==e.direction&&(t.direction=e.direction);for(var r=[new n("textStyle",e)],i=1;i<arguments.length;i++)r.push(arguments[i]);return r.push(new n("endTextStyle")),r}var n=e("./Instruction");t.exports=r},{"./Instruction":37}],77:[function(e,t){"use strict";function r(e){var t,r,n,o,a,c,u,l,h=[[1,0,0],[0,1,0],[0,0,1]],f=e.length;for(r=0;f>r;r++)t=e[r],t.hasOwnProperty("transform")?h=i(h,[[t.transform.a,t.transform.c,t.transform.e],[t.transform.b,t.transform.d,t.transform.f],[0,0,1]]):(t.hasOwnProperty("translate")&&(a=t.translate.x,c=t.translate.y,h=i(h,[[1,0,a],[0,1,c],[0,0,1]])),t.hasOwnProperty("scale")&&(a=t.scale.x,c=t.scale.y,h=i(h,[[a,0,0],[0,c,0],[0,0,1]])),t.hasOwnProperty("rotate")&&(o=Math.sin(t.rotate),n=Math.cos(t.rotate),h=i(h,[[n,-o,0],[o,n,0],[0,0,1]])));for(u={a:h[0][0],b:h[1][0],c:h[0][1],d:h[1][1],e:h[0][2],f:h[1][2]},l=[new s("transform",u)],r=1;r<arguments.length;r++)l.push(arguments[r]);return l.push(new s("restore")),l}function n(e){for(var t=e[0],r=[new s("transform",{a:t.props.a,b:t.props.b,c:t.props.c,d:t.props.d,e:t.props.e,f:t.props.f})],n=1;n<arguments.length;n++)r.push(arguments[n]);return r.push(new s("restore")),r}var i=e("square-matrix-multiply"),s=e("./Instruction");r.copy=n,t.exports=r},{"./Instruction":37,"square-matrix-multiply":33}],78:[function(e,t){"use strict";function r(e,t){for(var r,n=[],i=e.length,s=0;i>s;s++)r=e[s],n.push([t[0][0]*r[0]+t[0][1]*r[1]+t[0][2],t[1][0]*r[0]+t[1][1]*r[1]+t[1][2]]);return n}t.exports=r},{}],79:[function(e,t){"use strict";function r(e,t){for(var r=[new n("translate",{x:e,y:t})],i=2;i<arguments.length;i++)r.push(arguments[i]);return r.push(new n("restore")),r}{var n=e("./Instruction");e("lodash/array/flatten")}t.exports=r},{"./Instruction":37,"lodash/array/flatten":9}]},{},[7])(7)});